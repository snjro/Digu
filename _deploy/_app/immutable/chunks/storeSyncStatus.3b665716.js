var oc=Object.defineProperty;var cc=(s,t,e)=>t in s?oc(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var w=(s,t,e)=>(cc(s,typeof t!="symbol"?t+"":t,e),e),Mr=(s,t,e)=>{if(!t.has(s))throw TypeError("Cannot "+e)};var l=(s,t,e)=>(Mr(s,t,"read from private field"),e?e.call(s):t.get(s)),p=(s,t,e)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,e)},h=(s,t,e,n)=>(Mr(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e);var Zs=(s,t,e,n)=>({set _(r){h(s,t,r,e)},get _(){return l(s,t,n)}}),C=(s,t,e)=>(Mr(s,t,"access private method"),e);import{b as lc,c as uc}from"./storeUserSettings.8972ff17.js";import{t as hc,g as G,d as U,b,e as Ke,f as m,h as I,j as Ua,H as ti,k as Se,l as Fa,m as Hr,w as kr,o as Bt,u as B,p as sn,q as D,v as at,x as fc,y as S,i as Z,z as Vn,A as xt,B as Xn,C as zn,D as L,E as X,F as et,G as Ma,I as tn,J as dc,K as gc,L as $,M as J,N as Wt,O as pc,P as Ci,Q as Ha,R as Ac,T as Si,S as mc,U as Ga}from"./_index.26ae7803.js";import{v as wc,w as yc}from"./CommonItemMember.d32f367b.js";import{d as Qa,a as ja,D as Ja,b as hs,P as bc}from"./dbBase.2eec5af3.js";import{w as Va}from"./index.37aae590.js";import{c as Gr}from"./logger.cb3e7472.js";import{N as za}from"./BaseButton.411e578b.js";const Ec="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const Qi=BigInt(58);function Pc(s){let t=hc(G(s)),e="";for(;t;)e=Ec[Number(t%Qi)]+e,t/=Qi;return e}function Cc(s){s=atob(s);const t=new Uint8Array(s.length);for(let e=0;e<s.length;e++)t[e]=s.charCodeAt(e);return G(t)}function Sc(s){const t=G(s);let e="";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}var cn;class Ka{constructor(t,e,n){w(this,"filter");w(this,"emitter");p(this,cn,void 0);h(this,cn,e),U(this,{emitter:t,filter:n})}async removeListener(){l(this,cn)!=null&&await this.emitter.off(this.filter,l(this,cn))}}cn=new WeakMap;async function xc(s,t){const e=s.url.split(":")[0].toLowerCase();b(e==="http"||e==="https",`unsupported protocol ${e}`,"UNSUPPORTED_OPERATION",{info:{protocol:e},operation:"request"}),b(e==="https"||!s.credentials||s.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let n;if(t){const u=new AbortController;n=u.signal,t.addListener(()=>{u.abort()})}const r={method:s.method,headers:new Headers(Array.from(s)),body:s.body||void 0,signal:n},i=await fetch(s.url,r),a={};i.headers.forEach((u,d)=>{a[d.toLowerCase()]=u});const o=await i.arrayBuffer(),c=o==null?null:new Uint8Array(o);return{statusCode:i.status,statusMessage:i.statusText,headers:a,body:c}}const vc=12,Nc=250;let ji=xc;const Bc=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Ic=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Qr=!1;async function Wa(s,t){try{const e=s.match(Bc);if(!e)throw new Error("invalid data");return new ye(200,"OK",{"content-type":e[1]||"text/plain"},e[2]?Cc(e[3]):kc(e[3]))}catch{return new ye(599,"BAD REQUEST (invalid data: URI)",{},null,new Zt(s))}}function Za(s){async function t(e,n){try{const r=e.match(Ic);if(!r)throw new Error("invalid link");return new Zt(`${s}${r[2]}`)}catch{return new ye(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Zt(e))}}return t}const Ys={data:Wa,ipfs:Za("https://gateway.ipfs.io/ipfs/")},Ya=new WeakMap;var ve,ne;class Oc{constructor(t){p(this,ve,void 0);p(this,ne,void 0);h(this,ve,[]),h(this,ne,!1),Ya.set(t,()=>{if(!l(this,ne)){h(this,ne,!0);for(const e of l(this,ve))setTimeout(()=>{e()},0);h(this,ve,[])}})}addListener(t){b(!l(this,ne),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),l(this,ve).push(t)}get cancelled(){return l(this,ne)}checkSignal(){b(!this.cancelled,"cancelled","CANCELLED",{})}}ve=new WeakMap,ne=new WeakMap;function _s(s){if(s==null)throw new Error("missing signal; should not happen");return s.checkSignal(),s}var ln,un,Et,Dt,hn,fn,z,lt,Lt,Ne,Be,Ie,It,Ut,Oe,$n;const vr=class vr{constructor(t){p(this,Oe);p(this,ln,void 0);p(this,un,void 0);p(this,Et,void 0);p(this,Dt,void 0);p(this,hn,void 0);p(this,fn,void 0);p(this,z,void 0);p(this,lt,void 0);p(this,Lt,void 0);p(this,Ne,void 0);p(this,Be,void 0);p(this,Ie,void 0);p(this,It,void 0);p(this,Ut,void 0);h(this,fn,String(t)),h(this,ln,!1),h(this,un,!0),h(this,Et,{}),h(this,Dt,""),h(this,hn,3e5),h(this,Ut,{slotInterval:Nc,maxAttempts:vc})}get url(){return l(this,fn)}set url(t){h(this,fn,String(t))}get body(){return l(this,z)==null?null:new Uint8Array(l(this,z))}set body(t){if(t==null)h(this,z,void 0),h(this,lt,void 0);else if(typeof t=="string")h(this,z,Ke(t)),h(this,lt,"text/plain");else if(t instanceof Uint8Array)h(this,z,t),h(this,lt,"application/octet-stream");else if(typeof t=="object")h(this,z,Ke(JSON.stringify(t))),h(this,lt,"application/json");else throw new Error("invalid body")}hasBody(){return l(this,z)!=null}get method(){return l(this,Dt)?l(this,Dt):this.hasBody()?"POST":"GET"}set method(t){t==null&&(t=""),h(this,Dt,String(t).toUpperCase())}get headers(){const t=Object.assign({},l(this,Et));return l(this,Lt)&&(t.authorization=`Basic ${Sc(Ke(l(this,Lt)))}`),this.allowGzip&&(t["accept-encoding"]="gzip"),t["content-type"]==null&&l(this,lt)&&(t["content-type"]=l(this,lt)),this.body&&(t["content-length"]=String(this.body.length)),t}getHeader(t){return this.headers[t.toLowerCase()]}setHeader(t,e){l(this,Et)[String(t).toLowerCase()]=String(e)}clearHeaders(){h(this,Et,{})}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let n=0;return{next:()=>{if(n<e.length){const r=e[n++];return{value:[r,t[r]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return l(this,Lt)||null}setCredentials(t,e){m(!t.match(/:/),"invalid basic authentication username","username","[REDACTED]"),h(this,Lt,`${t}:${e}`)}get allowGzip(){return l(this,un)}set allowGzip(t){h(this,un,!!t)}get allowInsecureAuthentication(){return!!l(this,ln)}set allowInsecureAuthentication(t){h(this,ln,!!t)}get timeout(){return l(this,hn)}set timeout(t){m(t>=0,"timeout must be non-zero","timeout",t),h(this,hn,t)}get preflightFunc(){return l(this,Ne)||null}set preflightFunc(t){h(this,Ne,t)}get processFunc(){return l(this,Be)||null}set processFunc(t){h(this,Be,t)}get retryFunc(){return l(this,Ie)||null}set retryFunc(t){h(this,Ie,t)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${l(this,z)?I(l(this,z)):"null"}>`}setThrottleParams(t){t.slotInterval!=null&&(l(this,Ut).slotInterval=t.slotInterval),t.maxAttempts!=null&&(l(this,Ut).maxAttempts=t.maxAttempts)}send(){return b(l(this,It)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),h(this,It,new Oc(this)),C(this,Oe,$n).call(this,0,Ji()+this.timeout,0,this,new ye(0,"",{},null,this))}cancel(){b(l(this,It)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const t=Ya.get(this);if(!t)throw new Error("missing signal; should not happen");t()}redirect(t){const e=this.url.split(":")[0].toLowerCase(),n=t.split(":")[0].toLowerCase();b(this.method==="GET"&&(e!=="https"||n!=="http")&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(t)})`});const r=new vr(t);return r.method="GET",r.allowGzip=this.allowGzip,r.timeout=this.timeout,h(r,Et,Object.assign({},l(this,Et))),l(this,z)&&h(r,z,new Uint8Array(l(this,z))),h(r,lt,l(this,lt)),r}clone(){const t=new vr(this.url);return h(t,Dt,l(this,Dt)),l(this,z)&&h(t,z,l(this,z)),h(t,lt,l(this,lt)),h(t,Et,Object.assign({},l(this,Et))),h(t,Lt,l(this,Lt)),this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),h(t,Ne,l(this,Ne)),h(t,Be,l(this,Be)),h(t,Ie,l(this,Ie)),t}static lockConfig(){Qr=!0}static getGateway(t){return Ys[t.toLowerCase()]||null}static registerGateway(t,e){if(t=t.toLowerCase(),t==="http"||t==="https")throw new Error(`cannot intercept ${t}; use registerGetUrl`);if(Qr)throw new Error("gateways locked");Ys[t]=e}static registerGetUrl(t){if(Qr)throw new Error("gateways locked");ji=t}static createDataGateway(){return Wa}static createIpfsGatewayFunc(t){return Za(t)}};ln=new WeakMap,un=new WeakMap,Et=new WeakMap,Dt=new WeakMap,hn=new WeakMap,fn=new WeakMap,z=new WeakMap,lt=new WeakMap,Lt=new WeakMap,Ne=new WeakMap,Be=new WeakMap,Ie=new WeakMap,It=new WeakMap,Ut=new WeakMap,Oe=new WeakSet,$n=async function(t,e,n,r,i){var d,f,g;if(t>=l(this,Ut).maxAttempts)return i.makeServerError("exceeded maximum retry limit");b(Ji()<=e,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:r}),n>0&&await Tc(n);let a=this.clone();const o=(a.url.split(":")[0]||"").toLowerCase();if(o in Ys){const A=await Ys[o](a.url,_s(l(r,It)));if(A instanceof ye){let y=A;if(this.processFunc){_s(l(r,It));try{y=await this.processFunc(a,y)}catch(P){(P.throttle==null||typeof P.stall!="number")&&y.makeServerError("error in post-processing function",P).assertOk()}}return y}a=A}this.preflightFunc&&(a=await this.preflightFunc(a));const c=await ji(a,_s(l(r,It)));let u=new ye(c.statusCode,c.statusMessage,c.headers,c.body,r);if(u.statusCode===301||u.statusCode===302){try{const A=u.headers.location||"";return C(d=a.redirect(A),Oe,$n).call(d,t+1,e,0,r,u)}catch{}return u}else if(u.statusCode===429&&(this.retryFunc==null||await this.retryFunc(a,u,t))){const A=u.headers["retry-after"];let y=l(this,Ut).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return typeof A=="string"&&A.match(/^[1-9][0-9]*$/)&&(y=parseInt(A)),C(f=a.clone(),Oe,$n).call(f,t+1,e,y,r,u)}if(this.processFunc){_s(l(r,It));try{u=await this.processFunc(a,u)}catch(A){(A.throttle==null||typeof A.stall!="number")&&u.makeServerError("error in post-processing function",A).assertOk();let y=l(this,Ut).slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return A.stall>=0&&(y=A.stall),C(g=a.clone(),Oe,$n).call(g,t+1,e,y,r,u)}}return u};let Zt=vr;var Ss,xs,vs,Pt,dn,ke;const Mi=class Mi{constructor(t,e,n,r,i){p(this,Ss,void 0);p(this,xs,void 0);p(this,vs,void 0);p(this,Pt,void 0);p(this,dn,void 0);p(this,ke,void 0);h(this,Ss,t),h(this,xs,e),h(this,vs,Object.keys(n).reduce((a,o)=>(a[o.toLowerCase()]=String(n[o]),a),{})),h(this,Pt,r==null?null:new Uint8Array(r)),h(this,dn,i||null),h(this,ke,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${l(this,Pt)?I(l(this,Pt)):"null"}>`}get statusCode(){return l(this,Ss)}get statusMessage(){return l(this,xs)}get headers(){return Object.assign({},l(this,vs))}get body(){return l(this,Pt)==null?null:new Uint8Array(l(this,Pt))}get bodyText(){try{return l(this,Pt)==null?"":Ua(l(this,Pt))}catch{b(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{b(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const t=this.headers,e=Object.keys(t);let n=0;return{next:()=>{if(n<e.length){const r=e[n++];return{value:[r,t[r]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(t,e){let n;t?n=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${t})`:(t=`${this.statusCode} ${this.statusMessage}`,n=`CLIENT ESCALATED SERVER ERROR (${t})`);const r=new Mi(599,n,this.headers,this.body,l(this,dn)||void 0);return h(r,ke,{message:t,error:e}),r}throwThrottleError(t,e){e==null?e=-1:m(Number.isInteger(e)&&e>=0,"invalid stall timeout","stall",e);const n=new Error(t||"throttling requests");throw U(n,{stall:e,throttle:!0}),n}getHeader(t){return this.headers[t.toLowerCase()]}hasBody(){return l(this,Pt)!=null}get request(){return l(this,dn)}ok(){return l(this,ke).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:t,error:e}=l(this,ke);t===""&&(t=`server response ${this.statusCode} ${this.statusMessage}`),b(!1,t,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:e})}};Ss=new WeakMap,xs=new WeakMap,vs=new WeakMap,Pt=new WeakMap,dn=new WeakMap,ke=new WeakMap;let ye=Mi;function Ji(){return new Date().getTime()}function kc(s){return Ke(s.replace(/%([0-9a-f][0-9a-f])/gi,(t,e)=>String.fromCharCode(parseInt(e,16))))}function Tc(s){return new Promise(t=>setTimeout(t,s))}function Rc(s){let t=s.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function Vi(s,t,e){let n=0;for(let r=0;r<e;r++)n=n*256+s[t+r];return n}function zi(s,t,e,n){const r=[];for(;e<t+1+n;){const i=_a(s,e);r.push(i.result),e+=i.consumed,b(e<=t+1+n,"child data too short","BUFFER_OVERRUN",{buffer:s,length:n,offset:t})}return{consumed:1+n,result:r}}function _a(s,t){b(s.length!==0,"data too short","BUFFER_OVERRUN",{buffer:s,length:0,offset:1});const e=n=>{b(n<=s.length,"data short segment too short","BUFFER_OVERRUN",{buffer:s,length:s.length,offset:n})};if(s[t]>=248){const n=s[t]-247;e(t+1+n);const r=Vi(s,t+1,n);return e(t+1+n+r),zi(s,t,t+1+n,n+r)}else if(s[t]>=192){const n=s[t]-192;return e(t+1+n),zi(s,t,t+1,n)}else if(s[t]>=184){const n=s[t]-183;e(t+1+n);const r=Vi(s,t+1,n);e(t+1+n+r);const i=I(s.slice(t+1+n,t+1+n+r));return{consumed:1+n+r,result:i}}else if(s[t]>=128){const n=s[t]-128;e(t+1+n);const r=I(s.slice(t+1,t+1+n));return{consumed:1+n,result:r}}return{consumed:1,result:Rc(s[t])}}function xi(s){const t=G(s,"data"),e=_a(t,0);return m(e.consumed===t.length,"unexpected junk after rlp payload","data",s),e.result}function Ki(s){const t=[];for(;s;)t.unshift(s&255),s>>=8;return t}function Xa(s){if(Array.isArray(s)){let n=[];if(s.forEach(function(i){n=n.concat(Xa(i))}),n.length<=55)return n.unshift(192+n.length),n;const r=Ki(n.length);return r.unshift(247+r.length),r.concat(n)}const t=Array.prototype.slice.call(G(s,"object"));if(t.length===1&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const e=Ki(t.length);return e.unshift(183+e.length),e.concat(t)}const Wi="0123456789abcdef";function fs(s){let t="0x";for(const e of Xa(s))t+=Wi[e>>4],t+=Wi[e&15];return t}class qa extends ti{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Se.hash(t);const n=Fa(e);if(this.iHash=t.create(),!(this.iHash instanceof ti))throw new TypeError("Expected instance of class which extends utils.Hash");const r=this.blockLen=this.iHash.blockLen;this.outputLen=this.iHash.outputLen;const i=new Uint8Array(r);i.set(n.length>this.iHash.blockLen?t.create().update(n).digest():n);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=t.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(t){return Se.exists(this),this.iHash.update(t),this}digestInto(t){Se.exists(this),Se.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:r,destroyed:i,blockLen:a,outputLen:o}=this;return t=t,t.finished=r,t.destroyed=i,t.blockLen=a,t.outputLen=o,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const $a=(s,t,e)=>new qa(s,t).update(e).digest();$a.create=(s,t)=>new qa(s,t);function Dc(s,t,e,n){if(typeof s.setBigUint64=="function")return s.setBigUint64(t,e,n);const r=BigInt(32),i=BigInt(4294967295),a=Number(e>>r&i),o=Number(e&i),c=n?4:0,u=n?0:4;s.setUint32(t+c,a,n),s.setUint32(t+u,o,n)}class to extends ti{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Hr(this.buffer)}update(t){Se.exists(this);const{view:e,buffer:n,blockLen:r}=this;t=Fa(t);const i=t.length;for(let a=0;a<i;){const o=Math.min(r-this.pos,i-a);if(o===r){const c=Hr(t);for(;r<=i-a;a+=r)this.process(c,a);continue}n.set(t.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===r&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Se.exists(this),Se.output(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:i}=this;let{pos:a}=this;e[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>r-a&&(this.process(n,0),a=0);for(let c=a;c<r;c++)e[c]=0;Dc(n,r-8,BigInt(this.length*8),i),this.process(n,0);const o=Hr(t);this.get().forEach((c,u)=>o.setUint32(4*u,c,i))}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:i,destroyed:a,pos:o}=this;return t.length=r,t.pos=o,t.finished=i,t.destroyed=a,r%e&&t.buffer.set(n),t}}const Lc=(s,t,e)=>s&t^~s&e,Uc=(s,t,e)=>s&t^s&e^t&e,Fc=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),_t=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Xt=new Uint32Array(64);class Mc extends to{constructor(){super(64,32,8,!1),this.A=_t[0]|0,this.B=_t[1]|0,this.C=_t[2]|0,this.D=_t[3]|0,this.E=_t[4]|0,this.F=_t[5]|0,this.G=_t[6]|0,this.H=_t[7]|0}get(){const{A:t,B:e,C:n,D:r,E:i,F:a,G:o,H:c}=this;return[t,e,n,r,i,a,o,c]}set(t,e,n,r,i,a,o,c){this.A=t|0,this.B=e|0,this.C=n|0,this.D=r|0,this.E=i|0,this.F=a|0,this.G=o|0,this.H=c|0}process(t,e){for(let f=0;f<16;f++,e+=4)Xt[f]=t.getUint32(e,!1);for(let f=16;f<64;f++){const g=Xt[f-15],A=Xt[f-2],y=Bt(g,7)^Bt(g,18)^g>>>3,P=Bt(A,17)^Bt(A,19)^A>>>10;Xt[f]=P+Xt[f-7]+y+Xt[f-16]|0}let{A:n,B:r,C:i,D:a,E:o,F:c,G:u,H:d}=this;for(let f=0;f<64;f++){const g=Bt(o,6)^Bt(o,11)^Bt(o,25),A=d+g+Lc(o,c,u)+Fc[f]+Xt[f]|0,P=(Bt(n,2)^Bt(n,13)^Bt(n,22))+Uc(n,r,i)|0;d=u,u=c,c=o,o=a+A|0,a=i,i=r,r=n,n=A+P|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(n,r,i,a,o,c,u,d)}roundClean(){Xt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Hc=kr(()=>new Mc),[Gc,Qc]=B.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(s=>BigInt(s))),qt=new Uint32Array(80),$t=new Uint32Array(80);class vi extends to{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:n,Bl:r,Ch:i,Cl:a,Dh:o,Dl:c,Eh:u,El:d,Fh:f,Fl:g,Gh:A,Gl:y,Hh:P,Hl:v}=this;return[t,e,n,r,i,a,o,c,u,d,f,g,A,y,P,v]}set(t,e,n,r,i,a,o,c,u,d,f,g,A,y,P,v){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=r|0,this.Ch=i|0,this.Cl=a|0,this.Dh=o|0,this.Dl=c|0,this.Eh=u|0,this.El=d|0,this.Fh=f|0,this.Fl=g|0,this.Gh=A|0,this.Gl=y|0,this.Hh=P|0,this.Hl=v|0}process(t,e){for(let N=0;N<16;N++,e+=4)qt[N]=t.getUint32(e),$t[N]=t.getUint32(e+=4);for(let N=16;N<80;N++){const j=qt[N-15]|0,F=$t[N-15]|0,ft=B.rotrSH(j,F,1)^B.rotrSH(j,F,8)^B.shrSH(j,F,7),Pe=B.rotrSL(j,F,1)^B.rotrSL(j,F,8)^B.shrSL(j,F,7),V=qt[N-2]|0,K=$t[N-2]|0,Yt=B.rotrSH(V,K,19)^B.rotrBH(V,K,61)^B.shrSH(V,K,6),Ur=B.rotrSL(V,K,19)^B.rotrBL(V,K,61)^B.shrSL(V,K,6),Ws=B.add4L(Pe,Ur,$t[N-7],$t[N-16]),Fr=B.add4H(Ws,ft,Yt,qt[N-7],qt[N-16]);qt[N]=Fr|0,$t[N]=Ws|0}let{Ah:n,Al:r,Bh:i,Bl:a,Ch:o,Cl:c,Dh:u,Dl:d,Eh:f,El:g,Fh:A,Fl:y,Gh:P,Gl:v,Hh:x,Hl:k}=this;for(let N=0;N<80;N++){const j=B.rotrSH(f,g,14)^B.rotrSH(f,g,18)^B.rotrBH(f,g,41),F=B.rotrSL(f,g,14)^B.rotrSL(f,g,18)^B.rotrBL(f,g,41),ft=f&A^~f&P,Pe=g&y^~g&v,V=B.add5L(k,F,Pe,Qc[N],$t[N]),K=B.add5H(V,x,j,ft,Gc[N],qt[N]),Yt=V|0,Ur=B.rotrSH(n,r,28)^B.rotrBH(n,r,34)^B.rotrBH(n,r,39),Ws=B.rotrSL(n,r,28)^B.rotrBL(n,r,34)^B.rotrBL(n,r,39),Fr=n&i^n&o^i&o,ac=r&a^r&c^a&c;x=P|0,k=v|0,P=A|0,v=y|0,A=f|0,y=g|0,{h:f,l:g}=B.add(u|0,d|0,K|0,Yt|0),u=o|0,d=c|0,o=i|0,c=a|0,i=n|0,a=r|0;const Gi=B.add3L(Yt,Ws,ac);n=B.add3H(Gi,K,Ur,Fr),r=Gi|0}({h:n,l:r}=B.add(this.Ah|0,this.Al|0,n|0,r|0)),{h:i,l:a}=B.add(this.Bh|0,this.Bl|0,i|0,a|0),{h:o,l:c}=B.add(this.Ch|0,this.Cl|0,o|0,c|0),{h:u,l:d}=B.add(this.Dh|0,this.Dl|0,u|0,d|0),{h:f,l:g}=B.add(this.Eh|0,this.El|0,f|0,g|0),{h:A,l:y}=B.add(this.Fh|0,this.Fl|0,A|0,y|0),{h:P,l:v}=B.add(this.Gh|0,this.Gl|0,P|0,v|0),{h:x,l:k}=B.add(this.Hh|0,this.Hl|0,x|0,k|0),this.set(n,r,i,a,o,c,u,d,f,g,A,y,P,v,x,k)}roundClean(){qt.fill(0),$t.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class jc extends vi{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Jc extends vi{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const Vc=kr(()=>new vi);kr(()=>new jc);kr(()=>new Jc);function zc(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const Zi=zc();Zi.crypto||Zi.msCrypto;function Kc(s,t){const e={sha256:Hc,sha512:Vc}[s];return m(e!=null,"invalid hmac algorithm","algorithm",s),$a.create(e,t)}let eo=!1;const no=function(s,t,e){return Kc(s,t).update(e).digest()};let so=no;function js(s,t,e){const n=G(t,"key"),r=G(e,"data");return I(so(s,n,r))}js._=no;js.lock=function(){eo=!0};js.register=function(s){if(eo)throw new Error("computeHmac is locked");so=s};Object.freeze(js);const Wc={},Zc=Object.freeze(Object.defineProperty({__proto__:null,default:Wc},Symbol.toStringTag,{value:"Module"}));/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const O=BigInt(0),M=BigInt(1),me=BigInt(2),rs=BigInt(3),Yi=BigInt(8),Q=Object.freeze({a:O,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:M,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),_i=(s,t)=>(s+t/me)/t,Xs={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(s){const{n:t}=Q,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-M*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,a=BigInt("0x100000000000000000000000000000000"),o=_i(i*s,t),c=_i(-n*s,t);let u=E(s-o*e-c*r,t),d=E(-o*n-c*i,t);const f=u>a,g=d>a;if(f&&(u=t-u),g&&(d=t-d),u>a||d>a)throw new Error("splitScalarEndo: Endomorphism failed, k="+s);return{k1neg:f,k1:u,k2neg:g,k2:d}}},vt=32,Kn=32,Yc=32,ur=vt+1,hr=2*vt+1;function Xi(s){const{a:t,b:e}=Q,n=E(s*s),r=E(n*s);return E(r+t*s+e)}const qs=Q.a===O;class ro extends Error{constructor(t){super(t)}}function qi(s){if(!(s instanceof T))throw new TypeError("JacobianPoint expected")}class T{constructor(t,e,n){this.x=t,this.y=e,this.z=n}static fromAffine(t){if(!(t instanceof R))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(R.ZERO)?T.ZERO:new T(t.x,t.y,M)}static toAffineBatch(t){const e=tl(t.map(n=>n.z));return t.map((n,r)=>n.toAffine(e[r]))}static normalizeZ(t){return T.toAffineBatch(t).map(T.fromAffine)}equals(t){qi(t);const{x:e,y:n,z:r}=this,{x:i,y:a,z:o}=t,c=E(r*r),u=E(o*o),d=E(e*u),f=E(i*c),g=E(E(n*o)*u),A=E(E(a*r)*c);return d===f&&g===A}negate(){return new T(this.x,E(-this.y),this.z)}double(){const{x:t,y:e,z:n}=this,r=E(t*t),i=E(e*e),a=E(i*i),o=t+i,c=E(me*(E(o*o)-r-a)),u=E(rs*r),d=E(u*u),f=E(d-me*c),g=E(u*(c-f)-Yi*a),A=E(me*e*n);return new T(f,g,A)}add(t){qi(t);const{x:e,y:n,z:r}=this,{x:i,y:a,z:o}=t;if(i===O||a===O)return this;if(e===O||n===O)return t;const c=E(r*r),u=E(o*o),d=E(e*u),f=E(i*c),g=E(E(n*o)*u),A=E(E(a*r)*c),y=E(f-d),P=E(A-g);if(y===O)return P===O?this.double():T.ZERO;const v=E(y*y),x=E(y*v),k=E(d*v),N=E(P*P-x-me*k),j=E(P*(k-N)-g*x),F=E(r*o*y);return new T(N,j,F)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){const e=T.ZERO;if(typeof t=="bigint"&&t===O)return e;let n=ea(t);if(n===M)return this;if(!qs){let f=e,g=this;for(;n>O;)n&M&&(f=f.add(g)),g=g.double(),n>>=M;return f}let{k1neg:r,k1:i,k2neg:a,k2:o}=Xs.splitScalar(n),c=e,u=e,d=this;for(;i>O||o>O;)i&M&&(c=c.add(d)),o&M&&(u=u.add(d)),d=d.double(),i>>=M,o>>=M;return r&&(c=c.negate()),a&&(u=u.negate()),u=new T(E(u.x*Xs.beta),u.y,u.z),c.add(u)}precomputeWindow(t){const e=qs?128/t+1:256/t+1,n=[];let r=this,i=r;for(let a=0;a<e;a++){i=r,n.push(i);for(let o=1;o<2**(t-1);o++)i=i.add(r),n.push(i);r=i.double()}return n}wNAF(t,e){!e&&this.equals(T.BASE)&&(e=R.BASE);const n=e&&e._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let r=e&&ei.get(e);r||(r=this.precomputeWindow(n),e&&n!==1&&(r=T.normalizeZ(r),ei.set(e,r)));let i=T.ZERO,a=T.BASE;const o=1+(qs?128/n:256/n),c=2**(n-1),u=BigInt(2**n-1),d=2**n,f=BigInt(n);for(let g=0;g<o;g++){const A=g*c;let y=Number(t&u);t>>=f,y>c&&(y-=d,t+=M);const P=A,v=A+Math.abs(y)-1,x=g%2!==0,k=y<0;y===0?a=a.add($s(x,r[P])):i=i.add($s(k,r[v]))}return{p:i,f:a}}multiply(t,e){let n=ea(t),r,i;if(qs){const{k1neg:a,k1:o,k2neg:c,k2:u}=Xs.splitScalar(n);let{p:d,f}=this.wNAF(o,e),{p:g,f:A}=this.wNAF(u,e);d=$s(a,d),g=$s(c,g),g=new T(E(g.x*Xs.beta),g.y,g.z),r=d.add(g),i=f.add(A)}else{const{p:a,f:o}=this.wNAF(n,e);r=a,i=o}return T.normalizeZ([r,i])[0]}toAffine(t){const{x:e,y:n,z:r}=this,i=this.equals(T.ZERO);t==null&&(t=i?Yi:Js(r));const a=t,o=E(a*a),c=E(o*a),u=E(e*o),d=E(n*c),f=E(r*a);if(i)return R.ZERO;if(f!==M)throw new Error("invZ was invalid");return new R(u,d)}}T.BASE=new T(Q.Gx,Q.Gy,M);T.ZERO=new T(O,M,O);function $s(s,t){const e=t.negate();return s?e:t}const ei=new WeakMap;class R{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,ei.delete(this)}hasEvenY(){return this.y%me===O}static fromCompressedHex(t){const e=t.length===32,n=be(e?t:t.subarray(1));if(!jr(n))throw new Error("Point is not on curve");const r=Xi(n);let i=$c(r);const a=(i&M)===M;e?a&&(i=E(-i)):(t[0]&1)===1!==a&&(i=E(-i));const o=new R(n,i);return o.assertValidity(),o}static fromUncompressedHex(t){const e=be(t.subarray(1,vt+1)),n=be(t.subarray(vt+1,vt*2+1)),r=new R(e,n);return r.assertValidity(),r}static fromHex(t){const e=ds(t),n=e.length,r=e[0];if(n===vt)return this.fromCompressedHex(e);if(n===ur&&(r===2||r===3))return this.fromCompressedHex(e);if(n===hr&&r===4)return this.fromUncompressedHex(e);throw new Error(`Point.fromHex: received invalid point. Expected 32-${ur} compressed bytes or ${hr} uncompressed bytes, not ${n}`)}static fromPrivateKey(t){return R.BASE.multiply(ps(t))}static fromSignature(t,e,n){const{r,s:i}=il(e);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");const a=io(ds(t)),{n:o}=Q,c=n===2||n===3?r+o:r,u=Js(c,o),d=E(-a*u,o),f=E(i*u,o),g=n&1?"03":"02",A=R.fromHex(g+an(c)),y=R.BASE.multiplyAndAddUnsafe(A,d,f);if(!y)throw new Error("Cannot recover signature: point at infinify");return y.assertValidity(),y}toRawBytes(t=!1){return We(this.toHex(t))}toHex(t=!1){const e=an(this.x);return t?`${this.hasEvenY()?"02":"03"}${e}`:`04${e}${an(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const t="Point is not on elliptic curve",{x:e,y:n}=this;if(!jr(e)||!jr(n))throw new Error(t);const r=E(n*n),i=Xi(e);if(E(r-i)!==O)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new R(this.x,E(-this.y))}double(){return T.fromAffine(this).double().toAffine()}add(t){return T.fromAffine(this).add(T.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return T.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,e,n){const r=T.fromAffine(this),i=e===O||e===M||this!==R.BASE?r.multiplyUnsafe(e):r.multiply(e),a=T.fromAffine(t).multiplyUnsafe(n),o=i.add(a);return o.equals(T.ZERO)?void 0:o.toAffine()}}R.BASE=new R(Q.Gx,Q.Gy);R.ZERO=new R(O,O);function $i(s){return Number.parseInt(s[0],16)>=8?"00"+s:s}function ta(s){if(s.length<2||s[0]!==2)throw new Error(`Invalid signature integer tag: ${Wn(s)}`);const t=s[1],e=s.subarray(2,t+2);if(!t||e.length!==t)throw new Error("Invalid signature integer: wrong length");if(e[0]===0&&e[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:be(e),left:s.subarray(t+2)}}function _c(s){if(s.length<2||s[0]!=48)throw new Error(`Invalid signature tag: ${Wn(s)}`);if(s[1]!==s.length-2)throw new Error("Invalid signature: incorrect length");const{data:t,left:e}=ta(s.subarray(2)),{data:n,left:r}=ta(e);if(r.length)throw new Error(`Invalid signature: left bytes after parsing: ${Wn(r)}`);return{r:t,s:n}}let rn=class rr{constructor(t,e){this.r=t,this.s=e,this.assertValidity()}static fromCompact(t){const e=t instanceof Uint8Array,n="Signature.fromCompact";if(typeof t!="string"&&!e)throw new TypeError(`${n}: Expected string or Uint8Array`);const r=e?Wn(t):t;if(r.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new rr(fr(r.slice(0,64)),fr(r.slice(64,128)))}static fromDER(t){const e=t instanceof Uint8Array;if(typeof t!="string"&&!e)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:n,s:r}=_c(e?t:We(t));return new rr(n,r)}static fromHex(t){return this.fromDER(t)}assertValidity(){const{r:t,s:e}=this;if(!gs(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!gs(e))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const t=Q.n>>M;return this.s>t}normalizeS(){return this.hasHighS()?new rr(this.r,E(-this.s,Q.n)):this}toDERRawBytes(){return We(this.toDERHex())}toDERHex(){const t=$i(qn(this.s)),e=$i(qn(this.r)),n=t.length/2,r=e.length/2,i=qn(n),a=qn(r);return`30${qn(r+n+4)}02${a}${e}02${i}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return We(this.toCompactHex())}toCompactHex(){return an(this.r)+an(this.s)}};function ee(...s){if(!s.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(s.length===1)return s[0];const t=s.reduce((n,r)=>n+r.length,0),e=new Uint8Array(t);for(let n=0,r=0;n<s.length;n++){const i=s[n];e.set(i,r),r+=i.length}return e}const Xc=Array.from({length:256},(s,t)=>t.toString(16).padStart(2,"0"));function Wn(s){if(!(s instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let e=0;e<s.length;e++)t+=Xc[s[e]];return t}const qc=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function an(s){if(typeof s!="bigint")throw new Error("Expected bigint");if(!(O<=s&&s<qc))throw new Error("Expected number 0 <= n < 2^256");return s.toString(16).padStart(64,"0")}function ni(s){const t=We(an(s));if(t.length!==32)throw new Error("Error: expected 32 bytes");return t}function qn(s){const t=s.toString(16);return t.length&1?`0${t}`:t}function fr(s){if(typeof s!="string")throw new TypeError("hexToNumber: expected string, got "+typeof s);return BigInt(`0x${s}`)}function We(s){if(typeof s!="string")throw new TypeError("hexToBytes: expected string, got "+typeof s);if(s.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+s.length);const t=new Uint8Array(s.length/2);for(let e=0;e<t.length;e++){const n=e*2,r=s.slice(n,n+2),i=Number.parseInt(r,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[e]=i}return t}function be(s){return fr(Wn(s))}function ds(s){return s instanceof Uint8Array?Uint8Array.from(s):We(s)}function ea(s){if(typeof s=="number"&&Number.isSafeInteger(s)&&s>0)return BigInt(s);if(typeof s=="bigint"&&gs(s))return s;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function E(s,t=Q.P){const e=s%t;return e>=O?e:t+e}function dt(s,t){const{P:e}=Q;let n=s;for(;t-- >O;)n*=n,n%=e;return n}function $c(s){const{P:t}=Q,e=BigInt(6),n=BigInt(11),r=BigInt(22),i=BigInt(23),a=BigInt(44),o=BigInt(88),c=s*s*s%t,u=c*c*s%t,d=dt(u,rs)*u%t,f=dt(d,rs)*u%t,g=dt(f,me)*c%t,A=dt(g,n)*g%t,y=dt(A,r)*A%t,P=dt(y,a)*y%t,v=dt(P,o)*P%t,x=dt(v,a)*y%t,k=dt(x,rs)*u%t,N=dt(k,i)*A%t,j=dt(N,e)*c%t,F=dt(j,me);if(F*F%t!==s)throw new Error("Cannot find square root");return F}function Js(s,t=Q.P){if(s===O||t<=O)throw new Error(`invert: expected positive integers, got n=${s} mod=${t}`);let e=E(s,t),n=t,r=O,i=M;for(;e!==O;){const o=n/e,c=n%e,u=r-i*o;n=e,e=c,r=i,i=u}if(n!==M)throw new Error("invert: does not exist");return E(r,t)}function tl(s,t=Q.P){const e=new Array(s.length),n=s.reduce((i,a,o)=>a===O?i:(e[o]=i,E(i*a,t)),M),r=Js(n,t);return s.reduceRight((i,a,o)=>a===O?i:(e[o]=E(i*e[o],t),E(i*a,t)),r),e}function el(s){const t=s.length*8-Kn*8,e=be(s);return t>0?e>>BigInt(t):e}function io(s,t=!1){const e=el(s);if(t)return e;const{n}=Q;return e>=n?e-n:e}let on,is;class nl{constructor(t,e){if(this.hashLen=t,this.qByteLen=e,typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(t).fill(1),this.k=new Uint8Array(t).fill(0),this.counter=0}hmac(...t){return we.hmacSha256(this.k,...t)}hmacSync(...t){return is(this.k,...t)}checkSync(){if(typeof is!="function")throw new ro("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),t.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),t.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){this.incr();let t=0;const e=[];for(;t<this.qByteLen;){this.v=await this.hmac(this.v);const n=this.v.slice();e.push(n),t+=this.v.length}return ee(...e)}generateSync(){this.checkSync(),this.incr();let t=0;const e=[];for(;t<this.qByteLen;){this.v=this.hmacSync(this.v);const n=this.v.slice();e.push(n),t+=this.v.length}return ee(...e)}}function gs(s){return O<s&&s<Q.n}function jr(s){return O<s&&s<Q.P}function sl(s,t,e,n=!0){const{n:r}=Q,i=io(s,!0);if(!gs(i))return;const a=Js(i,r),o=R.BASE.multiply(i),c=E(o.x,r);if(c===O)return;const u=E(a*E(t+e*c,r),r);if(u===O)return;let d=new rn(c,u),f=(o.x===d.r?0:2)|Number(o.y&M);return n&&d.hasHighS()&&(d=d.normalizeS(),f^=1),{sig:d,recovery:f}}function ps(s){let t;if(typeof s=="bigint")t=s;else if(typeof s=="number"&&Number.isSafeInteger(s)&&s>0)t=BigInt(s);else if(typeof s=="string"){if(s.length!==2*Kn)throw new Error("Expected 32 bytes of private key");t=fr(s)}else if(s instanceof Uint8Array){if(s.length!==Kn)throw new Error("Expected 32 bytes of private key");t=be(s)}else throw new TypeError("Expected valid private key");if(!gs(t))throw new Error("Expected private key: 0 < key < n");return t}function rl(s){return s instanceof R?(s.assertValidity(),s):R.fromHex(s)}function il(s){if(s instanceof rn)return s.assertValidity(),s;try{return rn.fromDER(s)}catch{return rn.fromCompact(s)}}function al(s,t=!1){return R.fromPrivateKey(s).toRawBytes(t)}function ol(s,t,e,n=!1){return R.fromSignature(s,t,e).toRawBytes(n)}function na(s){const t=s instanceof Uint8Array,e=typeof s=="string",n=(t||e)&&s.length;return t?n===ur||n===hr:e?n===ur*2||n===hr*2:s instanceof R}function cl(s,t,e=!1){if(na(s))throw new TypeError("getSharedSecret: first arg must be private key");if(!na(t))throw new TypeError("getSharedSecret: second arg must be public key");const n=rl(t);return n.assertValidity(),n.multiply(ps(s)).toRawBytes(e)}function ao(s){const t=s.length>vt?s.slice(0,vt):s;return be(t)}function ll(s){const t=ao(s),e=E(t,Q.n);return oo(e<O?t:e)}function oo(s){return ni(s)}function ul(s,t,e){if(s==null)throw new Error(`sign: expected valid message hash, not "${s}"`);const n=ds(s),r=ps(t),i=[oo(r),ll(n)];if(e!=null){e===!0&&(e=we.randomBytes(vt));const c=ds(e);if(c.length!==vt)throw new Error(`sign: Expected ${vt} bytes of extra data`);i.push(c)}const a=ee(...i),o=ao(n);return{seed:a,m:o,d:r}}function hl(s,t){const{sig:e,recovery:n}=s,{der:r,recovered:i}=Object.assign({canonical:!0,der:!0},t),a=r?e.toDERRawBytes():e.toCompactRawBytes();return i?[a,n]:a}function fl(s,t,e={}){const{seed:n,m:r,d:i}=ul(s,t,e.extraEntropy),a=new nl(Yc,Kn);a.reseedSync(n);let o;for(;!(o=sl(a.generateSync(),r,i,e.canonical));)a.reseedSync();return hl(o,e)}R.BASE._setWindowSize(8);const ot={node:Zc,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},tr={},we={bytesToHex:Wn,hexToBytes:We,concatBytes:ee,mod:E,invert:Js,isValidPrivateKey(s){try{return ps(s),!0}catch{return!1}},_bigintTo32Bytes:ni,_normalizePrivateKey:ps,hashToPrivateKey:s=>{s=ds(s);const t=Kn+8;if(s.length<t||s.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");const e=E(be(s),Q.n-M)+M;return ni(e)},randomBytes:(s=32)=>{if(ot.web)return ot.web.getRandomValues(new Uint8Array(s));if(ot.node){const{randomBytes:t}=ot.node;return Uint8Array.from(t(s))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>we.hashToPrivateKey(we.randomBytes(Kn+8)),precompute(s=8,t=R.BASE){const e=t===R.BASE?t:new R(t.x,t.y);return e._setWindowSize(s),e.multiply(rs),e},sha256:async(...s)=>{if(ot.web){const t=await ot.web.subtle.digest("SHA-256",ee(...s));return new Uint8Array(t)}else if(ot.node){const{createHash:t}=ot.node,e=t("sha256");return s.forEach(n=>e.update(n)),Uint8Array.from(e.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(s,...t)=>{if(ot.web){const e=await ot.web.subtle.importKey("raw",s,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=ee(...t),r=await ot.web.subtle.sign("HMAC",e,n);return new Uint8Array(r)}else if(ot.node){const{createHmac:e}=ot.node,n=e("sha256",s);return t.forEach(r=>n.update(r)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(s,...t)=>{let e=tr[s];if(e===void 0){const n=await we.sha256(Uint8Array.from(s,r=>r.charCodeAt(0)));e=ee(n,n),tr[s]=e}return we.sha256(e,...t)},taggedHashSync:(s,...t)=>{if(typeof on!="function")throw new ro("sha256Sync is undefined, you need to set it");let e=tr[s];if(e===void 0){const n=on(Uint8Array.from(s,r=>r.charCodeAt(0)));e=ee(n,n),tr[s]=e}return on(e,...t)},_JacobianPoint:T};Object.defineProperties(we,{sha256Sync:{configurable:!1,get(){return on},set(s){on||(on=s)}},hmacSha256Sync:{configurable:!1,get(){return is},set(s){is||(is=s)}}});const si="0x0000000000000000000000000000000000000000",sa="0x0000000000000000000000000000000000000000000000000000000000000000",ra=BigInt(0),ia=BigInt(1),aa=BigInt(2),oa=BigInt(27),ca=BigInt(28),er=BigInt(35),_e={};function la(s){return Vn(xt(s),32)}var gn,pn,An,Te;const bt=class bt{constructor(t,e,n,r){p(this,gn,void 0);p(this,pn,void 0);p(this,An,void 0);p(this,Te,void 0);fc(t,_e,"Signature"),h(this,gn,e),h(this,pn,n),h(this,An,r),h(this,Te,null)}get r(){return l(this,gn)}set r(t){m(sn(t)===32,"invalid r","value",t),h(this,gn,I(t))}get s(){return l(this,pn)}set s(t){m(sn(t)===32,"invalid s","value",t);const e=I(t);m(parseInt(e.substring(0,3))<8,"non-canonical s","value",e),h(this,pn,e)}get v(){return l(this,An)}set v(t){const e=D(t,"value");m(e===27||e===28,"invalid v","v",t),h(this,An,e)}get networkV(){return l(this,Te)}get legacyChainId(){const t=this.networkV;return t==null?null:bt.getChainId(t)}get yParity(){return this.v===27?0:1}get yParityAndS(){const t=G(this.s);return this.yParity&&(t[0]|=128),I(t)}get compactSerialized(){return at([this.r,this.yParityAndS])}get serialized(){return at([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const t=new bt(_e,this.r,this.s,this.v);return this.networkV&&h(t,Te,this.networkV),t}toJSON(){const t=this.networkV;return{_type:"signature",networkV:t!=null?t.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(t){const e=S(t,"v");return e==oa||e==ca?ra:(m(e>=er,"invalid EIP-155 v","v",t),(e-er)/aa)}static getChainIdV(t,e){return S(t)*aa+BigInt(35+e-27)}static getNormalizedV(t){const e=S(t);return e===ra||e===oa?27:e===ia||e===ca?28:(m(e>=er,"invalid v","v",t),e&ia?27:28)}static from(t){function e(u,d){m(u,d,"signature",t)}if(t==null)return new bt(_e,sa,sa,27);if(typeof t=="string"){const u=G(t,"signature");if(u.length===64){const d=I(u.slice(0,32)),f=u.slice(32,64),g=f[0]&128?28:27;return f[0]&=127,new bt(_e,d,I(f),g)}if(u.length===65){const d=I(u.slice(0,32)),f=u.slice(32,64);e((f[0]&128)===0,"non-canonical s");const g=bt.getNormalizedV(u[64]);return new bt(_e,d,I(f),g)}e(!1,"invalid raw signature length")}if(t instanceof bt)return t.clone();const n=t.r;e(n!=null,"missing r");const r=la(n),i=function(u,d){if(u!=null)return la(u);if(d!=null){e(Z(d,32),"invalid yParityAndS");const f=G(d);return f[0]&=127,I(f)}e(!1,"missing s")}(t.s,t.yParityAndS);e((G(i)[0]&128)==0,"non-canonical s");const{networkV:a,v:o}=function(u,d,f){if(u!=null){const g=S(u);return{networkV:g>=er?g:void 0,v:bt.getNormalizedV(g)}}if(d!=null)return e(Z(d,32),"invalid yParityAndS"),{v:G(d)[0]&128?28:27};if(f!=null){switch(D(f,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}e(!1,"invalid yParity")}e(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),c=new bt(_e,r,i,o);return a&&h(c,Te,a),e(t.yParity==null||D(t.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),e(t.yParityAndS==null||t.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};gn=new WeakMap,pn=new WeakMap,An=new WeakMap,Te=new WeakMap;let Nt=bt;we.hmacSha256Sync=function(s,...t){return G(js("sha256",s,at(t)))};var Ft;const Ce=class Ce{constructor(t){p(this,Ft,void 0);m(sn(t)===32,"invalid private key","privateKey","[REDACTED]"),h(this,Ft,I(t))}get privateKey(){return l(this,Ft)}get publicKey(){return Ce.computePublicKey(l(this,Ft))}get compressedPublicKey(){return Ce.computePublicKey(l(this,Ft),!0)}sign(t){m(sn(t)===32,"invalid digest length","digest",t);const[e,n]=fl(Xn(t),Xn(l(this,Ft)),{recovered:!0,canonical:!0}),r=rn.fromHex(e);return Nt.from({r:zn("0x"+r.r.toString(16),32),s:zn("0x"+r.s.toString(16),32),v:n?28:27})}computeSharedSecret(t){const e=Ce.computePublicKey(t);return I(cl(Xn(l(this,Ft)),G(e)))}static computePublicKey(t,e){let n=G(t,"key");if(n.length===32){const i=al(n,!!e);return I(i)}if(n.length===64){const i=new Uint8Array(65);i[0]=4,i.set(n,1),n=i}const r=R.fromHex(n);return I(r.toRawBytes(e))}static recoverPublicKey(t,e){m(sn(t)===32,"invalid digest length","digest",t);const n=Nt.from(e),r=rn.fromCompact(Xn(at([n.r,n.s]))).toDERRawBytes(),i=ol(Xn(t),r,n.yParity);return m(i!=null,"invalid signature for digest","signature",e),I(i)}static addPoints(t,e,n){const r=R.fromHex(Ce.computePublicKey(t).substring(2)),i=R.fromHex(Ce.computePublicKey(e).substring(2));return"0x"+r.add(i).toHex(!!n)}};Ft=new WeakMap;let As=Ce;function dl(s){const t=L(s.from);let n=S(s.nonce,"tx.nonce").toString(16);return n==="0"?n="0x":n.length%2?n="0x0"+n:n="0x"+n,L(X(et(fs([t,n])),12))}function co(s){return s&&typeof s.getAddress=="function"}async function Jr(s,t){const e=await t;return(e==null||e==="0x0000000000000000000000000000000000000000")&&(b(typeof s!="string","unconfigured name","UNCONFIGURED_NAME",{value:s}),m(!1,"invalid AddressLike value; did not resolve to a value address","target",s)),L(e)}function it(s,t){if(typeof s=="string")return s.match(/^0x[0-9a-f]{40}$/i)?L(s):(b(t!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Jr(s,t.resolveName(s)));if(co(s))return Jr(s,s.getAddress());if(s&&typeof s.then=="function")return Jr(s,s);m(!1,"unsupported addressable value","target",s)}function gl(s){let t=0;function e(){return s[t++]<<8|s[t++]}let n=e(),r=1,i=[0,1];for(let F=1;F<n;F++)i.push(r+=e());let a=e(),o=t;t+=a;let c=0,u=0;function d(){return c==0&&(u=u<<8|s[t++],c=8),u>>--c&1}const f=31,g=2**f,A=g>>>1,y=A>>1,P=g-1;let v=0;for(let F=0;F<f;F++)v=v<<1|d();let x=[],k=0,N=g;for(;;){let F=Math.floor(((v-k+1)*r-1)/N),ft=0,Pe=n;for(;Pe-ft>1;){let Yt=ft+Pe>>>1;F<i[Yt]?Pe=Yt:ft=Yt}if(ft==0)break;x.push(ft);let V=k+Math.floor(N*i[ft]/r),K=k+Math.floor(N*i[ft+1]/r)-1;for(;!((V^K)&A);)v=v<<1&P|d(),V=V<<1&P,K=K<<1&P|1;for(;V&~K&y;)v=v&A|v<<1&P>>>1|d(),V=V<<1^A,K=(K^A)<<1|A|1;k=V,N=1+K-V}let j=n-4;return x.map(F=>{switch(F-j){case 3:return j+65792+(s[o++]<<16|s[o++]<<8|s[o++]);case 2:return j+256+(s[o++]<<8|s[o++]);case 1:return j+s[o++];default:return F-1}})}function pl(s){let t=0;return()=>s[t++]}function lo(s){return pl(gl(Al(s)))}function Al(s){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((r,i)=>t[r.charCodeAt(0)]=i);let e=s.length,n=new Uint8Array(6*e>>3);for(let r=0,i=0,a=0,o=0;r<e;r++)o=o<<6|t[s.charCodeAt(r)],a+=6,a>=8&&(n[i++]=o>>(a-=8));return n}function ml(s){return s&1?~s>>1:s>>1}function wl(s,t){let e=Array(s);for(let n=0,r=0;n<s;n++)e[n]=r+=ml(t());return e}function Ee(s,t=0){let e=[];for(;;){let n=s(),r=s();if(!r)break;t+=n;for(let i=0;i<r;i++)e.push(t+i);t+=r+1}return e}function uo(s){return ms(()=>{let t=Ee(s);if(t.length)return t})}function ho(s){let t=[];for(;;){let e=s();if(e==0)break;t.push(yl(e,s))}for(;;){let e=s()-1;if(e<0)break;t.push(bl(e,s))}return t.flat()}function ms(s){let t=[];for(;;){let e=s(t.length);if(!e)break;t.push(e)}return t}function fo(s,t,e){let n=Array(s).fill().map(()=>[]);for(let r=0;r<t;r++)wl(s,e).forEach((i,a)=>n[a].push(i));return n}function yl(s,t){let e=1+t(),n=t(),r=ms(t);return fo(r.length,1+s,t).flatMap((a,o)=>{let[c,...u]=a;return Array(r[o]).fill().map((d,f)=>{let g=f*n;return[c+f*e,u.map(A=>A+g)]})})}function bl(s,t){let e=1+t();return fo(e,1+s,t).map(r=>[r[0],r.slice(1)])}var ht=lo("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");const ua=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),ha=4;function El(s){return s.toString(16).toUpperCase().padStart(2,"0")}function go(s){return`{${El(s)}}`}function Pl(s){let t=[];for(let e=0,n=s.length;e<n;){let r=s.codePointAt(e);e+=r<65536?1:2,t.push(r)}return t}function ws(s){let e=s.length;if(e<4096)return String.fromCodePoint(...s);let n=[];for(let r=0;r<e;)n.push(String.fromCodePoint(...s.slice(r,r+=4096)));return n.join("")}var Ni=lo("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");function ts(s){return s>>24&255}function po(s){return s&16777215}const Cl=new Map(uo(Ni).flatMap((s,t)=>s.map(e=>[e,t+1<<24]))),Sl=new Set(Ee(Ni)),Ao=new Map,ri=new Map;for(let[s,t]of ho(Ni)){if(!Sl.has(s)&&t.length==2){let[e,n]=t,r=ri.get(e);r||(r=new Map,ri.set(e,r)),r.set(n,s)}Ao.set(s,t.reverse())}const ys=44032,dr=4352,gr=4449,pr=4519,mo=19,wo=21,Zn=28,Ar=wo*Zn,xl=mo*Ar,vl=ys+xl,Nl=dr+mo,Bl=gr+wo,Il=pr+Zn;function yo(s){return s>=ys&&s<vl}function Ol(s,t){if(s>=dr&&s<Nl&&t>=gr&&t<Bl)return ys+(s-dr)*Ar+(t-gr)*Zn;if(yo(s)&&t>pr&&t<Il&&(s-ys)%Zn==0)return s+(t-pr);{let e=ri.get(s);return e&&(e=e.get(t),e)?e:-1}}function bo(s){let t=[],e=[],n=!1;function r(i){let a=Cl.get(i);a&&(n=!0,i|=a),t.push(i)}for(let i of s)for(;;){if(i<128)t.push(i);else if(yo(i)){let a=i-ys,o=a/Ar|0,c=a%Ar/Zn|0,u=a%Zn;r(dr+o),r(gr+c),u>0&&r(pr+u)}else{let a=Ao.get(i);a?e.push(...a):r(i)}if(!e.length)break;i=e.pop()}if(n&&t.length>1){let i=ts(t[0]);for(let a=1;a<t.length;a++){let o=ts(t[a]);if(o==0||i<=o){i=o;continue}let c=a-1;for(;;){let u=t[c+1];if(t[c+1]=t[c],t[c]=u,!c||(i=ts(t[--c]),i<=o))break}i=ts(t[a])}}return t}function kl(s){let t=[],e=[],n=-1,r=0;for(let i of s){let a=ts(i),o=po(i);if(n==-1)a==0?n=o:t.push(o);else if(r>0&&r>=a)a==0?(t.push(n,...e),e.length=0,n=o):e.push(o),r=a;else{let c=Ol(n,o);c>=0?n=c:r==0&&a==0?(t.push(n),n=o):(e.push(o),r=a)}}return n>=0&&t.push(n,...e),t}function Eo(s){return bo(s).map(po)}function Tl(s){return kl(bo(s))}const ii=65039,Po=".",Co=1,fa=45;function _n(){return new Set(Ee(ht))}const Rl=new Map(ho(ht)),Dl=_n(),mr=_n(),da=new Set(Ee(ht).map(function(s){return this[s]},[...mr])),Ll=_n();_n();const Ul=uo(ht);function ga(){return new Set([Ee(ht).map(s=>Ul[s]),Ee(ht)].flat(2))}const Fl=ht(),bs=ms(s=>{let t=ms(ht).map(e=>e+96);if(t.length){let e=s>=Fl;t[0]-=32,t=ws(t),e&&(t=`Restricted[${t}]`);let n=ga(),r=ga(),i=[...n,...r].sort((o,c)=>o-c),a=!ht();return{N:t,P:n,M:a,R:e,V:new Set(i)}}}),pa=_n(),Es=new Map;[...pa,..._n()].sort((s,t)=>s-t).map((s,t,e)=>{let n=ht(),r=e[t]=n?e[t-n]:{V:[],M:new Map};r.V.push(s),pa.has(s)||Es.set(s,r)});for(let{V:s,M:t}of new Set(Es.values())){let e=[];for(let r of s){let i=bs.filter(o=>o.V.has(r)),a=e.find(({G:o})=>i.some(c=>o.has(c)));a||(a={G:new Set,V:[]},e.push(a)),a.V.push(r),i.forEach(o=>a.G.add(o))}let n=e.flatMap(({G:r})=>[...r]);for(let{G:r,V:i}of e){let a=new Set(n.filter(o=>!r.has(o)));for(let o of i)t.set(o,a)}}let Ps=new Set,So=new Set;for(let s of bs)for(let t of s.V)(Ps.has(t)?So:Ps).add(t);for(let s of Ps)!Es.has(s)&&!So.has(s)&&Es.set(s,Co);const Ml=new Set([...Ps,...Eo(Ps)]),Hl=Ee(ht),Gl=xo([]);function xo(s){let t=ms(()=>{let o=Ee(ht).map(c=>Hl[c]);if(o.length)return xo(o)}).sort((o,c)=>c.Q.size-o.Q.size),e=ht(),n=e%3;e=e/3|0;let r=e&1;e>>=1;let i=e&1,a=e&2;return{B:t,V:n,F:r,S:i,C:a,Q:new Set(s)}}class Ql extends Array{get is_emoji(){return!0}}function Tr(s,t=go){let e=[];Vl(s[0])&&e.push("◌");let n=0,r=s.length;for(let i=0;i<r;i++){let a=s[i];vo(a)&&(e.push(ws(s.slice(n,i))),e.push(t(a)),n=i+1)}return e.push(ws(s.slice(n,r))),e.join("")}function Bi(s){return(vo(s)?"":`${Ii(Tr([s]))} `)+go(s)}function Ii(s){return`"${s}"‎`}function jl(s){if(s.length>=4&&s[2]==fa&&s[3]==fa)throw new Error("invalid label extension")}function Aa(s){for(let e=s.lastIndexOf(95);e>0;)if(s[--e]!==95)throw new Error("underscore allowed only at start")}function Jl(s){let t=s[0],e=ua.get(t);if(e)throw as(`leading ${e}`);let n=s.length,r=-1;for(let i=1;i<n;i++){t=s[i];let a=ua.get(t);if(a){if(r==i)throw as(`${e} + ${a}`);r=i+1,e=a}}if(r==n)throw as(`trailing ${e}`)}function Vl(s){return mr.has(s)}function vo(s){return Ll.has(s)}function zl(s){return Yl(Kl(s))}function Kl(s,t){let e=0;return s.split(Po).map(n=>{let r=Pl(n),i={input:r,offset:e};e+=r.length+1;let a;try{let o=i.tokens=Xl(r,Tl),c=o.length,u;if(c){let d=o[0],f=c>1||d.is_emoji;if(!f&&d.every(g=>g<128))a=d,Aa(a),jl(a),u="ASCII";else if(f&&(i.emoji=!0,d=o.flatMap(g=>g.is_emoji?[]:g)),a=o.flatMap(g=>!t&&g.is_emoji?ql(g):g),Aa(a),!d.length)u="Emoji";else{if(mr.has(a[0]))throw as("leading combining mark");for(let y=1;y<c;y++){let P=o[y];if(!P.is_emoji&&mr.has(P[0]))throw as(`emoji + combining mark: "${ws(o[y-1])} + ${Tr([P[0]])}"`)}Jl(a);let g=[...new Set(d)],[A]=Zl(g);_l(A,d),Wl(A,g),u=A.N}}else throw new Error("empty label");i.type=u}catch(o){i.error=o}return i.output=a,i})}function Wl(s,t){let e,n=[];for(let r of t){let i=Es.get(r);if(i===Co)return;if(i){let a=i.M.get(r);if(e=e?e.filter(o=>a.has(o)):[...a],!e.length)return}else n.push(r)}if(e){for(let r of e)if(n.every(i=>r.V.has(i)))throw new Error(`whole-script confusable: ${s.N}/${r.N}`)}}function Zl(s){let t=bs;for(let e of s){let n=t.filter(r=>r.V.has(e));if(!n.length)throw t===bs?No(e):Bo(t[0],e);if(t=n,n.length==1)break}return t}function Yl(s){return s.map(({input:t,error:e,output:n})=>{if(e){let r=e.message;throw new Error(s.length==1?r:`Invalid label ${Ii(Tr(t))}: ${r}`)}return ws(n)}).join(Po)}function No(s){return new Error(`disallowed character: ${Bi(s)}`)}function Bo(s,t){let e=Bi(t),n=bs.find(r=>r.P.has(t));return n&&(e=`${n.N} ${e}`),new Error(`illegal mixture: ${s.N} + ${e}`)}function as(s){return new Error(`illegal placement: ${s}`)}function _l(s,t){let{V:e,M:n}=s;for(let r of t)if(!e.has(r))throw Bo(s,r);if(n){let r=Eo(t);for(let i=1,a=r.length;i<a;i++)if(da.has(r[i])){let o=i+1;for(let c;o<a&&da.has(c=r[o]);o++)for(let u=i;u<o;u++)if(r[u]==c)throw new Error(`non-spacing marks: repeated ${Bi(c)}`);if(o-i>ha)throw new Error(`non-spacing marks: too many ${Ii(Tr(r.slice(i-1,o)))} (${o-i}/${ha})`);i=o}}}function Xl(s,t){let e=[],n=[];for(s=s.slice().reverse();s.length;){let r=$l(s);if(r)n.length&&(e.push(t(n)),n=[]),e.push(r);else{let i=s.pop();if(Ml.has(i))n.push(i);else{let a=Rl.get(i);if(a)n.push(...a);else if(!Dl.has(i))throw No(i)}}}return n.length&&e.push(t(n)),e}function ql(s){return s.filter(t=>t!=ii)}function $l(s,t){let e=Gl,n,r,i=[],a=s.length;for(t&&(t.length=0);a;){let o=s[--a];if(e=e.B.find(c=>c.Q.has(o)),!e)break;if(e.S)r=o;else if(e.C&&o===r)break;i.push(o),e.F&&(i.push(ii),a>0&&s[a-1]==ii&&a--),e.V&&(n=tu(i,e),t&&t.push(...s.slice(a).reverse()),s.length=a)}return n}function tu(s,t){let e=Ql.from(s);return t.V==2&&e.splice(1,1),e}const Io=new Uint8Array(32);Io.fill(0);function ma(s){return m(s.length!==0,"invalid ENS name; empty component","comp",s),s}function Oo(s){const t=Ke(eu(s)),e=[];if(s.length===0)return e;let n=0;for(let r=0;r<t.length;r++)t[r]===46&&(e.push(ma(t.slice(n,r))),n=r+1);return m(n<t.length,"invalid ENS name; empty component","name",s),e.push(ma(t.slice(n))),e}function eu(s){try{return zl(s)}catch(t){m(!1,`invalid ENS name (${t.message})`,"name",s)}}function ai(s){m(typeof s=="string","invalid ENS name; not a string","name",s);let t=Io;const e=Oo(s);for(;e.length;)t=et(at([t,et(e.pop())]));return I(t)}function nu(s){return I(at(Oo(s).map(t=>{if(t.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const e=new Uint8Array(t.length+1);return e.set(t,1),e[0]=e.length-1,e})))+"00"}function Vr(s,t){return{address:L(s),storageKeys:t.map((e,n)=>(m(Z(e,32),"invalid slot",`storageKeys[${n}]`,e),e.toLowerCase()))}}function Ye(s){if(Array.isArray(s))return s.map((e,n)=>Array.isArray(e)?(m(e.length===2,"invalid slot set",`value[${n}]`,e),Vr(e[0],e[1])):(m(e!=null&&typeof e=="object","invalid address-slot set","value",s),Vr(e.address,e.storageKeys)));m(s!=null&&typeof s=="object","invalid access list","value",s);const t=Object.keys(s).map(e=>{const n=s[e].reduce((r,i)=>(r[i]=!0,r),{});return Vr(e,Object.keys(n).sort())});return t.sort((e,n)=>e.address.localeCompare(n.address)),t}function su(s){let t;return typeof s=="string"?t=As.computePublicKey(s,!1):t=s.publicKey,L(et("0x"+t.substring(4)).substring(26))}function ru(s,t){return su(As.recoverPublicKey(s,t))}const rt=BigInt(0),iu=BigInt(2),au=BigInt(27),ou=BigInt(28),cu=BigInt(35),lu=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Oi(s){return s==="0x"?null:L(s)}function ko(s,t){try{return Ye(s)}catch(e){m(!1,e.message,t,s)}}function Rr(s,t){return s==="0x"?0:D(s,t)}function tt(s,t){if(s==="0x")return rt;const e=S(s,t);return m(e<=lu,"value exceeds uint size",t,e),e}function W(s,t){const e=S(s,"value"),n=xt(e);return m(n.length<=32,"value too large",`tx.${t}`,e),n}function To(s){return Ye(s).map(t=>[t.address,t.storageKeys])}function uu(s){const t=xi(s);m(Array.isArray(t)&&(t.length===9||t.length===6),"invalid field count for legacy transaction","data",s);const e={type:0,nonce:Rr(t[0],"nonce"),gasPrice:tt(t[1],"gasPrice"),gasLimit:tt(t[2],"gasLimit"),to:Oi(t[3]),value:tt(t[4],"value"),data:I(t[5]),chainId:rt};if(t.length===6)return e;const n=tt(t[6],"v"),r=tt(t[7],"r"),i=tt(t[8],"s");if(r===rt&&i===rt)e.chainId=n;else{let a=(n-cu)/iu;a<rt&&(a=rt),e.chainId=a,m(a!==rt||n===au||n===ou,"non-canonical legacy v","v",t[6]),e.signature=Nt.from({r:Vn(t[7],32),s:Vn(t[8],32),v:n}),e.hash=et(s)}return e}function wa(s,t){const e=[W(s.nonce||0,"nonce"),W(s.gasPrice||0,"gasPrice"),W(s.gasLimit||0,"gasLimit"),s.to!=null?L(s.to):"0x",W(s.value||0,"value"),s.data||"0x"];let n=rt;if(s.chainId!=rt)n=S(s.chainId,"tx.chainId"),m(!t||t.networkV==null||t.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",t);else if(s.signature){const i=s.signature.legacyChainId;i!=null&&(n=i)}if(!t)return n!==rt&&(e.push(xt(n)),e.push("0x"),e.push("0x")),fs(e);let r=BigInt(27+t.yParity);return n!==rt?r=Nt.getChainIdV(n,t.v):BigInt(t.v)!==r&&m(!1,"tx.chainId/sig.v mismatch","sig",t),e.push(xt(r)),e.push(xt(t.r)),e.push(xt(t.s)),fs(e)}function Ro(s,t){let e;try{if(e=Rr(t[0],"yParity"),e!==0&&e!==1)throw new Error("bad yParity")}catch{m(!1,"invalid yParity","yParity",t[0])}const n=Vn(t[1],32),r=Vn(t[2],32),i=Nt.from({r:n,s:r,yParity:e});s.signature=i}function hu(s){const t=xi(G(s).slice(1));m(Array.isArray(t)&&(t.length===9||t.length===12),"invalid field count for transaction type: 2","data",I(s));const e=tt(t[2],"maxPriorityFeePerGas"),n=tt(t[3],"maxFeePerGas"),r={type:2,chainId:tt(t[0],"chainId"),nonce:Rr(t[1],"nonce"),maxPriorityFeePerGas:e,maxFeePerGas:n,gasPrice:null,gasLimit:tt(t[4],"gasLimit"),to:Oi(t[5]),value:tt(t[6],"value"),data:I(t[7]),accessList:ko(t[8],"accessList")};return t.length===9||(r.hash=et(s),Ro(r,t.slice(9))),r}function ya(s,t){const e=[W(s.chainId||0,"chainId"),W(s.nonce||0,"nonce"),W(s.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),W(s.maxFeePerGas||0,"maxFeePerGas"),W(s.gasLimit||0,"gasLimit"),s.to!=null?L(s.to):"0x",W(s.value||0,"value"),s.data||"0x",To(s.accessList||[])];return t&&(e.push(W(t.yParity,"yParity")),e.push(xt(t.r)),e.push(xt(t.s))),at(["0x02",fs(e)])}function fu(s){const t=xi(G(s).slice(1));m(Array.isArray(t)&&(t.length===8||t.length===11),"invalid field count for transaction type: 1","data",I(s));const e={type:1,chainId:tt(t[0],"chainId"),nonce:Rr(t[1],"nonce"),gasPrice:tt(t[2],"gasPrice"),gasLimit:tt(t[3],"gasLimit"),to:Oi(t[4]),value:tt(t[5],"value"),data:I(t[6]),accessList:ko(t[7],"accessList")};return t.length===8||(e.hash=et(s),Ro(e,t.slice(8))),e}function ba(s,t){const e=[W(s.chainId||0,"chainId"),W(s.nonce||0,"nonce"),W(s.gasPrice||0,"gasPrice"),W(s.gasLimit||0,"gasLimit"),s.to!=null?L(s.to):"0x",W(s.value||0,"value"),s.data||"0x",To(s.accessList||[])];return t&&(e.push(W(t.yParity,"recoveryParam")),e.push(xt(t.r)),e.push(xt(t.s))),at(["0x01",fs(e)])}var Mt,mn,wn,yn,bn,En,Pn,Cn,Sn,xn,vn,Nn;const te=class te{constructor(){p(this,Mt,void 0);p(this,mn,void 0);p(this,wn,void 0);p(this,yn,void 0);p(this,bn,void 0);p(this,En,void 0);p(this,Pn,void 0);p(this,Cn,void 0);p(this,Sn,void 0);p(this,xn,void 0);p(this,vn,void 0);p(this,Nn,void 0);h(this,Mt,null),h(this,mn,null),h(this,yn,0),h(this,bn,BigInt(0)),h(this,En,null),h(this,Pn,null),h(this,Cn,null),h(this,wn,"0x"),h(this,Sn,BigInt(0)),h(this,xn,BigInt(0)),h(this,vn,null),h(this,Nn,null)}get type(){return l(this,Mt)}set type(t){switch(t){case null:h(this,Mt,null);break;case 0:case"legacy":h(this,Mt,0);break;case 1:case"berlin":case"eip-2930":h(this,Mt,1);break;case 2:case"london":case"eip-1559":h(this,Mt,2);break;default:m(!1,"unsupported transaction type","type",t)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559"}return null}get to(){return l(this,mn)}set to(t){h(this,mn,t==null?null:L(t))}get nonce(){return l(this,yn)}set nonce(t){h(this,yn,D(t,"value"))}get gasLimit(){return l(this,bn)}set gasLimit(t){h(this,bn,S(t))}get gasPrice(){const t=l(this,En);return t==null&&(this.type===0||this.type===1)?rt:t}set gasPrice(t){h(this,En,t==null?null:S(t,"gasPrice"))}get maxPriorityFeePerGas(){const t=l(this,Pn);return t??(this.type===2?rt:null)}set maxPriorityFeePerGas(t){h(this,Pn,t==null?null:S(t,"maxPriorityFeePerGas"))}get maxFeePerGas(){const t=l(this,Cn);return t??(this.type===2?rt:null)}set maxFeePerGas(t){h(this,Cn,t==null?null:S(t,"maxFeePerGas"))}get data(){return l(this,wn)}set data(t){h(this,wn,I(t))}get value(){return l(this,Sn)}set value(t){h(this,Sn,S(t,"value"))}get chainId(){return l(this,xn)}set chainId(t){h(this,xn,S(t))}get signature(){return l(this,vn)||null}set signature(t){h(this,vn,t==null?null:Nt.from(t))}get accessList(){const t=l(this,Nn)||null;return t??(this.type===1||this.type===2?[]:null)}set accessList(t){h(this,Nn,t==null?null:Ye(t))}get hash(){return this.signature==null?null:et(this.serialized)}get unsignedHash(){return et(this.unsignedSerialized)}get from(){return this.signature==null?null:ru(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:As.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){switch(b(this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"}),this.inferType()){case 0:return wa(this,this.signature);case 1:return ba(this,this.signature);case 2:return ya(this,this.signature)}b(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get unsignedSerialized(){switch(this.inferType()){case 0:return wa(this);case 1:return ba(this);case 2:return ya(this)}b(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".unsignedSerialized"})}inferType(){return this.inferTypes().pop()}inferTypes(){const t=this.gasPrice!=null,e=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,n=this.accessList!=null;this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&b(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),b(!e||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),b(this.type!==0||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const r=[];return this.type!=null?r.push(this.type):e?r.push(2):t?(r.push(1),n||r.push(0)):n?(r.push(1),r.push(2)):(r.push(0),r.push(1),r.push(2)),r.sort(),r}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}clone(){return te.from(this)}toJSON(){const t=e=>e==null?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:t(this.gasLimit),gasPrice:t(this.gasPrice),maxPriorityFeePerGas:t(this.maxPriorityFeePerGas),maxFeePerGas:t(this.maxFeePerGas),value:t(this.value),chainId:t(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(t){if(t==null)return new te;if(typeof t=="string"){const n=G(t);if(n[0]>=127)return te.from(uu(n));switch(n[0]){case 1:return te.from(fu(n));case 2:return te.from(hu(n))}b(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const e=new te;return t.type!=null&&(e.type=t.type),t.to!=null&&(e.to=t.to),t.nonce!=null&&(e.nonce=t.nonce),t.gasLimit!=null&&(e.gasLimit=t.gasLimit),t.gasPrice!=null&&(e.gasPrice=t.gasPrice),t.maxPriorityFeePerGas!=null&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas),t.maxFeePerGas!=null&&(e.maxFeePerGas=t.maxFeePerGas),t.data!=null&&(e.data=t.data),t.value!=null&&(e.value=t.value),t.chainId!=null&&(e.chainId=t.chainId),t.signature!=null&&(e.signature=Nt.from(t.signature)),t.accessList!=null&&(e.accessList=t.accessList),t.hash!=null&&(m(e.isSigned(),"unsigned transaction cannot define hash","tx",t),m(e.hash===t.hash,"hash mismatch","tx",t)),t.from!=null&&(m(e.isSigned(),"unsigned transaction cannot define from","tx",t),m(e.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),e}};Mt=new WeakMap,mn=new WeakMap,wn=new WeakMap,yn=new WeakMap,bn=new WeakMap,En=new WeakMap,Pn=new WeakMap,Cn=new WeakMap,Sn=new WeakMap,xn=new WeakMap,vn=new WeakMap,Nn=new WeakMap;let wr=te;const Do=new Uint8Array(32);Do.fill(0);const du=BigInt(-1),Lo=BigInt(0),Uo=BigInt(1),gu=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function pu(s){const t=G(s),e=t.length%32;return e?at([t,Do.slice(e)]):I(t)}const Au=zn(Uo,32),mu=zn(Lo,32),Ea={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},zr=["name","version","chainId","verifyingContract","salt"];function Pa(s){return function(t){return m(typeof t=="string",`invalid domain value for ${JSON.stringify(s)}`,`domain.${s}`,t),t}}const wu={name:Pa("name"),version:Pa("version"),chainId:function(s){const t=S(s,"domain.chainId");return m(t>=0,"invalid chain ID","domain.chainId",s),Number.isSafeInteger(t)?Number(t):tn(t)},verifyingContract:function(s){try{return L(s).toLowerCase()}catch{}m(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",s)},salt:function(s){const t=G(s,"domain.salt");return m(t.length===32,'invalid domain value "salt"',"domain.salt",s),I(t)}};function Kr(s){{const t=s.match(/^(u?)int(\d*)$/);if(t){const e=t[1]==="",n=parseInt(t[2]||"256");m(n%8===0&&n!==0&&n<=256&&(t[2]==null||t[2]===String(n)),"invalid numeric width","type",s);const r=dc(gu,e?n-1:n),i=e?(r+Uo)*du:Lo;return function(a){const o=S(a,"value");return m(o>=i&&o<=r,`value out-of-bounds for ${s}`,"value",o),zn(e?gc(o,256):o,32)}}}{const t=s.match(/^bytes(\d+)$/);if(t){const e=parseInt(t[1]);return m(e!==0&&e<=32&&t[1]===String(e),"invalid bytes width","type",s),function(n){const r=G(n);return m(r.length===e,`invalid length for ${s}`,"value",n),pu(n)}}}switch(s){case"address":return function(t){return Vn(L(t),32)};case"bool":return function(t){return t?Au:mu};case"bytes":return function(t){return et(t)};case"string":return function(t){return Ma(t)}}return null}function Ca(s,t){return`${s}(${t.map(({name:e,type:n})=>n+" "+e).join(",")})`}var Ns,Ht,Bn,Nr,Fo;const pt=class pt{constructor(t){p(this,Nr);w(this,"primaryType");p(this,Ns,void 0);p(this,Ht,void 0);p(this,Bn,void 0);h(this,Ns,JSON.stringify(t)),h(this,Ht,new Map),h(this,Bn,new Map);const e=new Map,n=new Map,r=new Map;Object.keys(t).forEach(o=>{e.set(o,new Set),n.set(o,[]),r.set(o,new Set)});for(const o in t){const c=new Set;for(const u of t[o]){m(!c.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(o)}`,"types",t),c.add(u.name);const d=u.type.match(/^([^\x5b]*)(\x5b|$)/)[1]||null;m(d!==o,`circular type reference to ${JSON.stringify(d)}`,"types",t),!Kr(d)&&(m(n.has(d),`unknown type ${JSON.stringify(d)}`,"types",t),n.get(d).push(o),e.get(o).add(d))}}const i=Array.from(n.keys()).filter(o=>n.get(o).length===0);m(i.length!==0,"missing primary type","types",t),m(i.length===1,`ambiguous primary types or unused types: ${i.map(o=>JSON.stringify(o)).join(", ")}`,"types",t),U(this,{primaryType:i[0]});function a(o,c){m(!c.has(o),`circular type reference to ${JSON.stringify(o)}`,"types",t),c.add(o);for(const u of e.get(o))if(n.has(u)){a(u,c);for(const d of c)r.get(d).add(u)}c.delete(o)}a(this.primaryType,new Set);for(const[o,c]of r){const u=Array.from(c);u.sort(),l(this,Ht).set(o,Ca(o,t[o])+u.map(d=>Ca(d,t[d])).join(""))}}get types(){return JSON.parse(l(this,Ns))}getEncoder(t){let e=l(this,Bn).get(t);return e||(e=C(this,Nr,Fo).call(this,t),l(this,Bn).set(t,e)),e}encodeType(t){const e=l(this,Ht).get(t);return m(e,`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return et(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,n){if(Kr(t))return n(t,e);const r=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r)return m(!r[3]||parseInt(r[3])===e.length,`array length mismatch; expected length ${parseInt(r[3])}`,"value",e),e.map(a=>this._visit(r[1],a,n));const i=this.types[t];if(i)return i.reduce((a,{name:o,type:c})=>(a[o]=this._visit(c,e[o],n),a),{});m(!1,`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new pt(t)}static getPrimaryType(t){return pt.from(t).primaryType}static hashStruct(t,e,n){return pt.from(e).hashStruct(t,n)}static hashDomain(t){const e=[];for(const n in t){if(t[n]==null)continue;const r=Ea[n];m(r,`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",t),e.push({name:n,type:r})}return e.sort((n,r)=>zr.indexOf(n.name)-zr.indexOf(r.name)),pt.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,n){return at(["0x1901",pt.hashDomain(t),pt.from(e).hash(n)])}static hash(t,e,n){return et(pt.encode(t,e,n))}static async resolveNames(t,e,n,r){t=Object.assign({},t);for(const o in t)t[o]==null&&delete t[o];const i={};t.verifyingContract&&!Z(t.verifyingContract,20)&&(i[t.verifyingContract]="0x");const a=pt.from(e);a.visit(n,(o,c)=>(o==="address"&&!Z(c,20)&&(i[c]="0x"),c));for(const o in i)i[o]=await r(o);return t.verifyingContract&&i[t.verifyingContract]&&(t.verifyingContract=i[t.verifyingContract]),n=a.visit(n,(o,c)=>o==="address"&&i[c]?i[c]:c),{domain:t,value:n}}static getPayload(t,e,n){pt.hashDomain(t);const r={},i=[];zr.forEach(c=>{const u=t[c];u!=null&&(r[c]=wu[c](u),i.push({name:c,type:Ea[c]}))});const a=pt.from(e),o=Object.assign({},e);return m(o.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",e),o.EIP712Domain=i,a.encode(n),{types:o,domain:r,primaryType:a.primaryType,message:a.visit(n,(c,u)=>{if(c.match(/^bytes(\d*)/))return I(G(u));if(c.match(/^u?int/))return S(u).toString();switch(c){case"address":return u.toLowerCase();case"bool":return!!u;case"string":return m(typeof u=="string","invalid string","value",u),u}m(!1,"unsupported type","type",c)})}}};Ns=new WeakMap,Ht=new WeakMap,Bn=new WeakMap,Nr=new WeakSet,Fo=function(t){{const r=Kr(t);if(r)return r}const e=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(e){const r=e[1],i=this.getEncoder(r);return a=>{m(!e[3]||parseInt(e[3])===a.length,`array length mismatch; expected length ${parseInt(e[3])}`,"value",a);let o=a.map(i);return l(this,Ht).has(r)&&(o=o.map(et)),et(at(o))}}const n=this.types[t];if(n){const r=Ma(l(this,Ht).get(t));return i=>{const a=n.map(({name:o,type:c})=>{const u=this.getEncoder(c)(i[o]);return l(this,Ht).has(c)?et(u):u});return a.unshift(r),at(a)}}m(!1,`unknown type: ${t}`,"type",t)};let yr=pt;const Mo=BigInt(0);function os(s){return s??null}function q(s){return s==null?null:s.toString()}class Sa{constructor(t,e,n){w(this,"gasPrice");w(this,"maxFeePerGas");w(this,"maxPriorityFeePerGas");U(this,{gasPrice:os(t),maxFeePerGas:os(e),maxPriorityFeePerGas:os(n)})}toJSON(){const{gasPrice:t,maxFeePerGas:e,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:q(t),maxFeePerGas:q(e),maxPriorityFeePerGas:q(n)}}}function br(s){const t={};s.to&&(t.to=s.to),s.from&&(t.from=s.from),s.data&&(t.data=I(s.data));const e="chainId,gasLimit,gasPrice,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const r of e)!(r in s)||s[r]==null||(t[r]=S(s[r],`request.${r}`));const n="type,nonce".split(/,/);for(const r of n)!(r in s)||s[r]==null||(t[r]=D(s[r],`request.${r}`));return s.accessList&&(t.accessList=Ye(s.accessList)),"blockTag"in s&&(t.blockTag=s.blockTag),"enableCcipRead"in s&&(t.enableCcipRead=!!s.enableCcipRead),"customData"in s&&(t.customData=s.customData),t}var Gt;class yu{constructor(t,e){w(this,"provider");w(this,"number");w(this,"hash");w(this,"timestamp");w(this,"parentHash");w(this,"nonce");w(this,"difficulty");w(this,"gasLimit");w(this,"gasUsed");w(this,"miner");w(this,"extraData");w(this,"baseFeePerGas");p(this,Gt,void 0);h(this,Gt,t.transactions.map(n=>typeof n!="string"?new Cs(n,e):n)),U(this,{provider:e,hash:os(t.hash),number:t.number,timestamp:t.timestamp,parentHash:t.parentHash,nonce:t.nonce,difficulty:t.difficulty,gasLimit:t.gasLimit,gasUsed:t.gasUsed,miner:t.miner,extraData:t.extraData,baseFeePerGas:os(t.baseFeePerGas)})}get transactions(){return l(this,Gt).map(t=>typeof t=="string"?t:t.hash)}get prefetchedTransactions(){const t=l(this,Gt).slice();return t.length===0?[]:(b(typeof t[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),t)}toJSON(){const{baseFeePerGas:t,difficulty:e,extraData:n,gasLimit:r,gasUsed:i,hash:a,miner:o,nonce:c,number:u,parentHash:d,timestamp:f,transactions:g}=this;return{_type:"Block",baseFeePerGas:q(t),difficulty:q(e),extraData:n,gasLimit:q(r),gasUsed:q(i),hash:a,miner:o,nonce:c,number:u,parentHash:d,timestamp:f,transactions:g}}[Symbol.iterator](){let t=0;const e=this.transactions;return{next:()=>t<this.length?{value:e[t++],done:!1}:{value:void 0,done:!0}}}get length(){return l(this,Gt).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(t){let e;if(typeof t=="number")e=l(this,Gt)[t];else{const n=t.toLowerCase();for(const r of l(this,Gt))if(typeof r=="string"){if(r!==n)continue;e=r;break}else{if(r.hash===n)continue;e=r;break}}if(e==null)throw new Error("no such tx");return typeof e=="string"?await this.provider.getTransaction(e):e}getPrefetchedTransaction(t){const e=this.prefetchedTransactions;if(typeof t=="number")return e[t];t=t.toLowerCase();for(const n of e)if(n.hash===t)return n;m(!1,"no matching transaction","indexOrHash",t)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return bu(this)}}Gt=new WeakMap;class Vs{constructor(t,e){w(this,"provider");w(this,"transactionHash");w(this,"blockHash");w(this,"blockNumber");w(this,"removed");w(this,"address");w(this,"data");w(this,"topics");w(this,"index");w(this,"transactionIndex");this.provider=e;const n=Object.freeze(t.topics.slice());U(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:n,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){const{address:t,blockHash:e,blockNumber:n,data:r,index:i,removed:a,topics:o,transactionHash:c,transactionIndex:u}=this;return{_type:"log",address:t,blockHash:e,blockNumber:n,data:r,index:i,removed:a,topics:o,transactionHash:c,transactionIndex:u}}async getBlock(){const t=await this.provider.getBlock(this.blockHash);return b(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransaction(){const t=await this.provider.getTransaction(this.transactionHash);return b(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransactionReceipt(){const t=await this.provider.getTransactionReceipt(this.transactionHash);return b(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{}),t}removedEvent(){return Eu(this)}}var Bs;class Ho{constructor(t,e){w(this,"provider");w(this,"to");w(this,"from");w(this,"contractAddress");w(this,"hash");w(this,"index");w(this,"blockHash");w(this,"blockNumber");w(this,"logsBloom");w(this,"gasUsed");w(this,"cumulativeGasUsed");w(this,"gasPrice");w(this,"type");w(this,"status");w(this,"root");p(this,Bs,void 0);h(this,Bs,Object.freeze(t.logs.map(r=>new Vs(r,e))));let n=Mo;t.effectiveGasPrice!=null?n=t.effectiveGasPrice:t.gasPrice!=null&&(n=t.gasPrice),U(this,{provider:e,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,gasPrice:n,type:t.type,status:t.status,root:t.root})}get logs(){return l(this,Bs)}toJSON(){const{to:t,from:e,contractAddress:n,hash:r,index:i,blockHash:a,blockNumber:o,logsBloom:c,logs:u,status:d,root:f}=this;return{_type:"TransactionReceipt",blockHash:a,blockNumber:o,contractAddress:n,cumulativeGasUsed:q(this.cumulativeGasUsed),from:e,gasPrice:q(this.gasPrice),gasUsed:q(this.gasUsed),hash:r,index:i,logs:u,logsBloom:c,root:f,status:d,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const t=await this.provider.getBlock(this.blockHash);if(t==null)throw new Error("TODO");return t}async getTransaction(){const t=await this.provider.getTransaction(this.hash);if(t==null)throw new Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Qo(this)}reorderedEvent(t){return b(!t||t.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Go(this,t)}}Bs=new WeakMap;var se;const Hi=class Hi{constructor(t,e){w(this,"provider");w(this,"blockNumber");w(this,"blockHash");w(this,"index");w(this,"hash");w(this,"type");w(this,"to");w(this,"from");w(this,"nonce");w(this,"gasLimit");w(this,"gasPrice");w(this,"maxPriorityFeePerGas");w(this,"maxFeePerGas");w(this,"data");w(this,"value");w(this,"chainId");w(this,"signature");w(this,"accessList");p(this,se,void 0);this.provider=e,this.blockNumber=t.blockNumber!=null?t.blockNumber:null,this.blockHash=t.blockHash!=null?t.blockHash:null,this.hash=t.hash,this.index=t.index,this.type=t.type,this.from=t.from,this.to=t.to||null,this.gasLimit=t.gasLimit,this.nonce=t.nonce,this.data=t.data,this.value=t.value,this.gasPrice=t.gasPrice,this.maxPriorityFeePerGas=t.maxPriorityFeePerGas!=null?t.maxPriorityFeePerGas:null,this.maxFeePerGas=t.maxFeePerGas!=null?t.maxFeePerGas:null,this.chainId=t.chainId,this.signature=t.signature,this.accessList=t.accessList!=null?t.accessList:null,h(this,se,-1)}toJSON(){const{blockNumber:t,blockHash:e,index:n,hash:r,type:i,to:a,from:o,nonce:c,data:u,signature:d,accessList:f}=this;return{_type:"TransactionReceipt",accessList:f,blockNumber:t,blockHash:e,chainId:q(this.chainId),data:u,from:o,gasLimit:q(this.gasLimit),gasPrice:q(this.gasPrice),hash:r,maxFeePerGas:q(this.maxFeePerGas),maxPriorityFeePerGas:q(this.maxPriorityFeePerGas),nonce:c,signature:d,to:a,index:n,type:i,value:q(this.value)}}async getBlock(){let t=this.blockNumber;if(t==null){const n=await this.getTransaction();n&&(t=n.blockNumber)}if(t==null)return null;const e=this.provider.getBlock(t);if(e==null)throw new Error("TODO");return e}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:e,blockNumber:n}=await $({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return e==null||e.blockNumber==null?0:n-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(t,e){const n=t??1,r=e??0;let i=l(this,se),a=-1,o=i===-1;const c=async()=>{if(o)return null;const{blockNumber:g,nonce:A}=await $({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(A<this.nonce){i=g;return}if(o)return null;const y=await this.getTransaction();if(!(y&&y.blockNumber!=null))for(a===-1&&(a=i-3,a<l(this,se)&&(a=l(this,se)));a<=g;){if(o)return null;const P=await this.provider.getBlock(a,!0);if(P==null)return;for(const v of P)if(v===this.hash)return;for(let v=0;v<P.length;v++){const x=await P.getTransaction(v);if(x.from===this.from&&x.nonce===this.nonce){if(o)return null;const k=await this.provider.getTransactionReceipt(x.hash);if(k==null||g-k.blockNumber+1<n)return;let N="replaced";x.data===this.data&&x.to===this.to&&x.value===this.value?N="repriced":x.data==="0x"&&x.from===x.to&&x.value===Mo&&(N="cancelled"),b(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:N==="replaced"||N==="cancelled",reason:N,replacement:x.replaceableTransaction(i),hash:x.hash,receipt:k})}}a++}},u=g=>{if(g==null||g.status!==0)return g;b(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:g.to,from:g.from,data:""},receipt:g})},d=await this.provider.getTransactionReceipt(this.hash);if(n===0)return u(d);if(d){if(await d.confirmations()>=n)return u(d)}else if(await c(),n===0)return null;return await new Promise((g,A)=>{const y=[],P=()=>{y.forEach(x=>x())};if(y.push(()=>{o=!0}),r>0){const x=setTimeout(()=>{P(),A(J("wait for transaction timeout","TIMEOUT"))},r);y.push(()=>{clearTimeout(x)})}const v=async x=>{if(await x.confirmations()>=n){P();try{g(u(x))}catch(k){A(k)}}};if(y.push(()=>{this.provider.off(this.hash,v)}),this.provider.on(this.hash,v),i>=0){const x=async()=>{try{await c()}catch(k){if(Wt(k,"TRANSACTION_REPLACED")){P(),A(k);return}}o||this.provider.once("block",x)};y.push(()=>{this.provider.off("block",x)}),this.provider.once("block",x)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}removedEvent(){return b(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Qo(this)}reorderedEvent(t){return b(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),b(!t||t.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Go(this,t)}replaceableTransaction(t){m(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);const e=new Hi(this,this.provider);return h(e,se,t),e}};se=new WeakMap;let Cs=Hi;function bu(s){return{orphan:"drop-block",hash:s.hash,number:s.number}}function Go(s,t){return{orphan:"reorder-transaction",tx:s,other:t}}function Qo(s){return{orphan:"drop-transaction",tx:s}}function Eu(s){return{orphan:"drop-log",log:{transactionHash:s.transactionHash,blockHash:s.blockHash,blockNumber:s.blockNumber,address:s.address,data:s.data,topics:Object.freeze(s.topics.slice()),index:s.index}}}class ki extends Vs{constructor(e,n,r){super(e,e.provider);w(this,"interface");w(this,"fragment");w(this,"args");const i=n.decodeEventLog(r,e.data,e.topics);U(this,{args:i,fragment:r,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class jo extends Vs{constructor(e,n){super(e,e.provider);w(this,"error");U(this,{error:n})}}var In;class Pu extends Ho{constructor(e,n,r){super(r,n);p(this,In,void 0);h(this,In,e)}get logs(){return super.logs.map(e=>{const n=e.topics.length?l(this,In).getEvent(e.topics[0]):null;if(n)try{return new ki(e,l(this,In),n)}catch(r){return new jo(e,r)}return e})}}In=new WeakMap;var Is;class Ti extends Cs{constructor(e,n,r){super(r,n);p(this,Is,void 0);h(this,Is,e)}async wait(e){const n=await super.wait(e);return n==null?null:new Pu(l(this,Is),this.provider,n)}}Is=new WeakMap;class Jo extends Ka{constructor(e,n,r,i){super(e,n,r);w(this,"log");U(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Cu extends Jo{constructor(t,e,n,r,i){super(t,e,n,new ki(i,t.interface,r));const a=t.interface.decodeEventLog(r,this.log.data,this.log.topics);U(this,{args:a,fragment:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const xa=BigInt(0);function Vo(s){return s&&typeof s.call=="function"}function zo(s){return s&&typeof s.estimateGas=="function"}function Ri(s){return s&&typeof s.resolveName=="function"}function Ko(s){return s&&typeof s.sendTransaction=="function"}var Os;class Su{constructor(t,e,n){p(this,Os,void 0);w(this,"fragment");if(U(this,{fragment:e}),e.inputs.length<n.length)throw new Error("too many arguments");const r=Ze(t.runner,"resolveName"),i=Ri(r)?r:null;h(this,Os,async function(){const a=await Promise.all(e.inputs.map((o,c)=>n[c]==null?null:o.walkAsync(n[c],(d,f)=>d==="address"?Array.isArray(f)?Promise.all(f.map(g=>it(g,i))):it(f,i):f)));return t.interface.encodeFilterTopics(e,a)}())}getTopicFilter(){return l(this,Os)}}Os=new WeakMap;function Ze(s,t){return s==null?null:typeof s[t]=="function"?s:s.provider&&typeof s.provider[t]=="function"?s.provider:null}function xe(s){return s==null?null:s.provider||null}async function Wo(s,t){const e=Ha.dereference(s,"overrides");m(typeof e=="object","invalid overrides parameter","overrides",s);const n=br(e);return m(n.to==null||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),m(n.data==null||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=await it(n.from)),n}async function xu(s,t,e){const n=Ze(s,"resolveName"),r=Ri(n)?n:null;return await Promise.all(t.map((i,a)=>i.walkAsync(e[a],(o,c)=>(c=Ha.dereference(c,o),o==="address"?it(c,r):c))))}function vu(s){const t=async function(a){const o=await Wo(a,["data"]);o.to=await s.getAddress();const c=s.interface,u=S(o.value||xa,"overrides.value")===xa,d=(o.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!d&&!u&&m(!1,"cannot send data to receive or send value to non-payable fallback","overrides",a),m(c.fallback||d,"cannot send data to receive-only contract","overrides.data",o.data);const f=c.receive||c.fallback&&c.fallback.payable;return m(f||u,"cannot send value to non-payable fallback","overrides.value",o.value),m(c.fallback||d,"cannot send data to receive-only contract","overrides.data",o.data),o},e=async function(a){const o=Ze(s.runner,"call");b(Vo(o),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await t(a);try{return await o.call(c)}catch(u){throw Ci(u)&&u.data?s.interface.makeError(u.data,c):u}},n=async function(a){const o=s.runner;b(Ko(o),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await o.sendTransaction(await t(a)),u=xe(s.runner);return new Ti(s.interface,u,c)},r=async function(a){const o=Ze(s.runner,"estimateGas");return b(zo(o),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await o.estimateGas(await t(a))},i=async a=>await n(a);return U(i,{_contract:s,estimateGas:r,populateTransaction:t,send:n,staticCall:e}),i}function Nu(s,t){const e=function(...u){const d=s.interface.getFunction(t,u);return b(d,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:u}}),d},n=async function(...u){const d=e(...u);let f={};if(d.inputs.length+1===u.length&&(f=await Wo(u.pop())),d.inputs.length!==u.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const g=await xu(s.runner,d.inputs,u);return Object.assign({},f,await $({to:s.getAddress(),data:s.interface.encodeFunctionData(d,g)}))},r=async function(...u){const d=await o(...u);return d.length===1?d[0]:d},i=async function(...u){const d=s.runner;b(Ko(d),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const f=await d.sendTransaction(await n(...u)),g=xe(s.runner);return new Ti(s.interface,g,f)},a=async function(...u){const d=Ze(s.runner,"estimateGas");return b(zo(d),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await d.estimateGas(await n(...u))},o=async function(...u){const d=Ze(s.runner,"call");b(Vo(d),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const f=await n(...u);let g="0x";try{g=await d.call(f)}catch(y){throw Ci(y)&&y.data?s.interface.makeError(y.data,f):y}const A=e(...u);return s.interface.decodeFunctionResult(A,g)},c=async(...u)=>e(...u).constant?await r(...u):await i(...u);return U(c,{name:s.interface.getFunctionName(t),_contract:s,_key:t,getFragment:e,estimateGas:a,populateTransaction:n,send:i,staticCall:r,staticCallResult:o}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const u=s.interface.getFunction(t);return b(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),u}}),c}function Bu(s,t){const e=function(...r){const i=s.interface.getEvent(t,r);return b(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}}),i},n=function(...r){return new Su(s,e(...r),r)};return U(n,{name:s.interface.getEventName(t),_contract:s,_key:t,getFragment:e}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{const r=s.interface.getEvent(t);return b(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),r}}),n}const Er=Symbol.for("_ethersInternal_contract"),Zo=new WeakMap;function Iu(s,t){Zo.set(s[Er],t)}function ct(s){return Zo.get(s[Er])}function Ou(s){return s&&typeof s=="object"&&"getTopicFilter"in s&&typeof s.getTopicFilter=="function"&&s.fragment}async function Di(s,t){let e,n=null;if(Array.isArray(t)){const i=function(a){if(Z(a,32))return a;const o=s.interface.getEvent(a);return m(o,"unknown fragment","name",a),o.topicHash};e=t.map(a=>a==null?null:Array.isArray(a)?a.map(i):i(a))}else t==="*"?e=[null]:typeof t=="string"?Z(t,32)?e=[t]:(n=s.interface.getEvent(t),m(n,"unknown fragment","event",t),e=[n.topicHash]):Ou(t)?e=await t.getTopicFilter():"fragment"in t?(n=t.fragment,e=[n.topicHash]):m(!1,"unknown event name","event",t);e=e.map(i=>{if(i==null)return null;if(Array.isArray(i)){const a=Array.from(new Set(i.map(o=>o.toLowerCase())).values());return a.length===1?a[0]:(a.sort(),a)}return i.toLowerCase()});const r=e.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:n,tag:r,topics:e}}async function es(s,t){const{subs:e}=ct(s);return e.get((await Di(s,t)).tag)||null}async function va(s,t,e){const n=xe(s.runner);b(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:r,tag:i,topics:a}=await Di(s,e),{addr:o,subs:c}=ct(s);let u=c.get(i);if(!u){const f={address:o||s,topics:a},g=v=>{let x=r;if(x==null)try{x=s.interface.getEvent(v.topics[0])}catch{}if(x){const k=x,N=r?s.interface.decodeEventLog(r,v.data,v.topics):[];ci(s,e,N,j=>new Cu(s,j,e,k,v))}else ci(s,e,[],k=>new Jo(s,k,e,v))};let A=[];u={tag:i,listeners:[],start:()=>{A.length||A.push(n.on(f,g))},stop:async()=>{if(A.length==0)return;let v=A;A=[],await Promise.all(v),n.off(f,g)}},c.set(i,u)}return u}let oi=Promise.resolve();async function ku(s,t,e,n){await oi;const r=await es(s,t);if(!r)return!1;const i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:a,once:o})=>{const c=Array.from(e);n&&c.push(n(o?null:a));try{a.call(s,...c)}catch{}return!o}),r.listeners.length===0&&(r.stop(),ct(s).subs.delete(r.tag)),i>0}async function ci(s,t,e,n){try{await oi}catch{}const r=ku(s,t,e,n);return oi=r,await r}const nr=["then"];var Hh;const us=class us{constructor(t,e,n,r){w(this,"target");w(this,"interface");w(this,"runner");w(this,"filters");w(this,Hh);w(this,"fallback");m(typeof t=="string"||co(t),"invalid value for Contract target","target",t),n==null&&(n=null);const i=pc.from(e);U(this,{target:t,runner:n,interface:i}),Object.defineProperty(this,Er,{value:{}});let a,o=null,c=null;if(r){const f=xe(n);c=new Ti(this.interface,f,r)}let u=new Map;if(typeof t=="string")if(Z(t))o=t,a=Promise.resolve(t);else{const f=Ze(n,"resolveName");if(!Ri(f))throw J("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});a=f.resolveName(t).then(g=>{if(g==null)throw J("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:t});return ct(this).addr=g,g})}else a=t.getAddress().then(f=>{if(f==null)throw new Error("TODO");return ct(this).addr=f,f});Iu(this,{addrPromise:a,addr:o,deployTx:c,subs:u});const d=new Proxy({},{get:(f,g,A)=>{if(typeof g=="symbol"||nr.indexOf(g)>=0)return Reflect.get(f,g,A);try{return this.getEvent(g)}catch(y){if(!Wt(y,"INVALID_ARGUMENT")||y.argument!=="key")throw y}},has:(f,g)=>nr.indexOf(g)>=0?Reflect.has(f,g):Reflect.has(f,g)||this.interface.hasEvent(String(g))});return U(this,{filters:d}),U(this,{fallback:i.receive||i.fallback?vu(this):null}),new Proxy(this,{get:(f,g,A)=>{if(typeof g=="symbol"||g in f||nr.indexOf(g)>=0)return Reflect.get(f,g,A);try{return f.getFunction(g)}catch(y){if(!Wt(y,"INVALID_ARGUMENT")||y.argument!=="key")throw y}},has:(f,g)=>typeof g=="symbol"||g in f||nr.indexOf(g)>=0?Reflect.has(f,g):f.interface.hasFunction(g)})}connect(t){return new us(this.target,this.interface,t)}attach(t){return new us(t,this.interface,this.runner)}async getAddress(){return await ct(this).addrPromise}async getDeployedCode(){const t=xe(this.runner);b(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const e=await t.getCode(await this.getAddress());return e==="0x"?null:e}async waitForDeployment(){const t=this.deploymentTransaction();if(t)return await t.wait(),this;if(await this.getDeployedCode()!=null)return this;const n=xe(this.runner);return b(n!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((r,i)=>{const a=async()=>{try{if(await this.getDeployedCode()!=null)return r(this);n.once("block",a)}catch(o){i(o)}};a()})}deploymentTransaction(){return ct(this).deployTx}getFunction(t){return typeof t!="string"&&(t=t.format()),Nu(this,t)}getEvent(t){return typeof t!="string"&&(t=t.format()),Bu(this,t)}async queryTransaction(t){throw new Error("@TODO")}async queryFilter(t,e,n){e==null&&(e=0),n==null&&(n="latest");const{addr:r,addrPromise:i}=ct(this),a=r||await i,{fragment:o,topics:c}=await Di(this,t),u={address:a,topics:c,fromBlock:e,toBlock:n},d=xe(this.runner);return b(d,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await d.getLogs(u)).map(f=>{let g=o;if(g==null)try{g=this.interface.getEvent(f.topics[0])}catch{}if(g)try{return new ki(f,this.interface,g)}catch(A){return new jo(f,A)}return new Vs(f,d)})}async on(t,e){const n=await va(this,"on",t);return n.listeners.push({listener:e,once:!1}),n.start(),this}async once(t,e){const n=await va(this,"once",t);return n.listeners.push({listener:e,once:!0}),n.start(),this}async emit(t,...e){return await ci(this,t,e,null)}async listenerCount(t){if(t){const r=await es(this,t);return r?r.listeners.length:0}const{subs:e}=ct(this);let n=0;for(const{listeners:r}of e.values())n+=r.length;return n}async listeners(t){if(t){const r=await es(this,t);return r?r.listeners.map(({listener:i})=>i):[]}const{subs:e}=ct(this);let n=[];for(const{listeners:r}of e.values())n=n.concat(r.map(({listener:i})=>i));return n}async off(t,e){const n=await es(this,t);if(!n)return this;if(e){const r=n.listeners.map(({listener:i})=>i).indexOf(e);r>=0&&n.listeners.splice(r,1)}return(e==null||n.listeners.length===0)&&(n.stop(),ct(this).subs.delete(n.tag)),this}async removeAllListeners(t){if(t){const e=await es(this,t);if(!e)return this;e.stop(),ct(this).subs.delete(e.tag)}else{const{subs:e}=ct(this);for(const{tag:n,stop:r}of e.values())r(),e.delete(n)}return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return await this.off(t,e)}static buildClass(t){class e extends us{constructor(r,i=null){super(r,t,i)}}return e}static from(t,e,n){return n==null&&(n=null),new this(t,e,n)}};Hh=Er;let li=us;function Tu(){return li}class cs extends Tu(){}function Wr(s){return s.match(/^ipfs:\/\/ipfs\//i)?s=s.substring(12):s.match(/^ipfs:\/\//i)?s=s.substring(7):m(!1,"unsupported IPFS format","link",s),`https://gateway.ipfs.io/ipfs/${s}`}class Ru{constructor(t){w(this,"name");U(this,{name:t})}connect(t){return this}supportsCoinType(t){return!1}async encodeAddress(t,e){throw new Error("unsupported coin")}async decodeAddress(t,e){throw new Error("unsupported coin")}}const Yo=new RegExp("^(ipfs)://(.*)$","i"),Na=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),Yo,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var re,Re,ie,$e,Br,_o;const en=class en{constructor(t,e,n){p(this,ie);w(this,"provider");w(this,"address");w(this,"name");p(this,re,void 0);p(this,Re,void 0);U(this,{provider:t,address:e,name:n}),h(this,re,null),h(this,Re,new cs(e,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],t))}async supportsWildcard(){return l(this,re)==null&&h(this,re,(async()=>{try{return await l(this,Re).supportsInterface("0x9061b923")}catch(t){if(Wt(t,"CALL_EXCEPTION"))return!1;throw h(this,re,null),t}})()),await l(this,re)}async getAddress(t){if(t==null&&(t=60),t===60)try{const i=await C(this,ie,$e).call(this,"addr(bytes32)");return i==null||i===si?null:i}catch(i){if(Wt(i,"CALL_EXCEPTION"))return null;throw i}if(t>=0&&t<2147483648){let i=t+2147483648;const a=await C(this,ie,$e).call(this,"addr(bytes32,uint)",[i]);if(Z(a,20))return L(a)}let e=null;for(const i of this.provider.plugins)if(i instanceof Ru&&i.supportsCoinType(t)){e=i;break}if(e==null)return null;const n=await C(this,ie,$e).call(this,"addr(bytes32,uint)",[t]);if(n==null||n==="0x")return null;const r=await e.decodeAddress(t,n);if(r!=null)return r;b(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${t})`,info:{coinType:t,data:n}})}async getText(t){const e=await C(this,ie,$e).call(this,"text(bytes32,string)",[t]);return e==null||e==="0x"?null:e}async getContentHash(){const t=await C(this,ie,$e).call(this,"contenthash(bytes32)");if(t==null||t==="0x")return null;const e=t.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){const r=e[1]==="e3010170"?"ipfs":"ipns",i=parseInt(e[4],16);if(e[5].length===i*2)return`${r}://${Pc("0x"+e[2])}`}const n=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&n[1].length===64)return`bzz://${n[1]}`;b(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:t}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const t=[{type:"name",value:this.name}];try{const e=await this.getText("avatar");if(e==null)return t.push({type:"!avatar",value:""}),{url:null,linkage:t};t.push({type:"avatar",value:e});for(let n=0;n<Na.length;n++){const r=e.match(Na[n]);if(r==null)continue;const i=r[1].toLowerCase();switch(i){case"https":case"data":return t.push({type:"url",value:e}),{linkage:t,url:e};case"ipfs":{const a=Wr(e);return t.push({type:"ipfs",value:e}),t.push({type:"url",value:a}),{linkage:t,url:a}}case"erc721":case"erc1155":{const a=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";t.push({type:i,value:e});const o=await this.getAddress();if(o==null)return t.push({type:"!owner",value:""}),{url:null,linkage:t};const c=(r[2]||"").split("/");if(c.length!==2)return t.push({type:`!${i}caip`,value:r[2]||""}),{url:null,linkage:t};const u=c[1],d=new cs(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const P=await d.ownerOf(u);if(o!==P)return t.push({type:"!owner",value:P}),{url:null,linkage:t};t.push({type:"owner",value:P})}else if(i==="erc1155"){const P=await d.balanceOf(o,u);if(!P)return t.push({type:"!balance",value:"0"}),{url:null,linkage:t};t.push({type:"balance",value:P.toString()})}let f=await d[a](u);if(f==null||f==="0x")return t.push({type:"!metadata-url",value:""}),{url:null,linkage:t};t.push({type:"metadata-url-base",value:f}),i==="erc1155"&&(f=f.replace("{id}",zn(u,32).substring(2)),t.push({type:"metadata-url-expanded",value:f})),f.match(/^ipfs:/i)&&(f=Wr(f)),t.push({type:"metadata-url",value:f});let g={};const A=await new Zt(f).send();A.assertOk();try{g=A.bodyJson}catch{try{t.push({type:"!metadata",value:A.bodyText})}catch{const x=A.body;return x&&t.push({type:"!metadata",value:I(x)}),{url:null,linkage:t}}return{url:null,linkage:t}}if(!g)return t.push({type:"!metadata",value:""}),{url:null,linkage:t};t.push({type:"metadata",value:JSON.stringify(g)});let y=g.image;if(typeof y!="string")return t.push({type:"!imageUrl",value:""}),{url:null,linkage:t};if(!y.match(/^(https:\/\/|data:)/i)){if(y.match(Yo)==null)return t.push({type:"!imageUrl-ipfs",value:y}),{url:null,linkage:t};t.push({type:"imageUrl-ipfs",value:y}),y=Wr(y)}return t.push({type:"url",value:y}),{linkage:t,url:y}}}}}catch{}return{linkage:t,url:null}}static async getEnsAddress(t){const e=await t.getNetwork(),n=e.getPlugin("org.ethers.plugins.network.Ens");return b(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:e}}),n.address}static async fromName(t,e){var r;let n=e;for(;;){if(n===""||n==="."||e!=="eth"&&n==="eth")return null;const i=await C(r=en,Br,_o).call(r,t,n);if(i!=null){const a=new en(t,i,e);return n!==e&&!await a.supportsWildcard()?null:a}n=n.split(".").slice(1).join(".")}}};re=new WeakMap,Re=new WeakMap,ie=new WeakSet,$e=async function(t,e){e=(e||[]).slice();const n=l(this,Re).interface;e.unshift(ai(this.name));let r=null;await this.supportsWildcard()&&(r=n.getFunction(t),b(r,"missing fragment","UNKNOWN_ERROR",{info:{funcName:t}}),e=[nu(this.name),n.encodeFunctionData(r,e)],t="resolve(bytes,bytes)"),e.push({enableCcipRead:!0});try{const i=await l(this,Re)[t](...e);return r?n.decodeFunctionResult(r,i)[0]:i}catch(i){if(!Wt(i,"CALL_EXCEPTION"))throw i}return null},Br=new WeakSet,_o=async function(t,e){const n=await en.getEnsAddress(t);try{const i=await new cs(n,["function resolver(bytes32) view returns (address)"],t).resolver(ai(e),{enableCcipRead:!0});return i===si?null:i}catch(r){throw r}return null},p(en,Br);let Pr=en;const Ba=BigInt(0);function H(s,t){return function(e){return e==null?t:s(e)}}function Li(s){return t=>{if(!Array.isArray(t))throw new Error("not an array");return t.map(e=>s(e))}}function zs(s,t){return e=>{const n={};for(const r in s){let i=r;if(t&&r in t&&!(i in e)){for(const a of t[r])if(a in e){i=a;break}}try{const a=s[r](e[i]);a!==void 0&&(n[r]=a)}catch(a){const o=a instanceof Error?a.message:"not-an-error";b(!1,`invalid value for value.${r} (${o})`,"BAD_DATA",{value:e})}}return n}}function Du(s){switch(s){case!0:case"true":return!0;case!1:case"false":return!1}m(!1,`invalid boolean; ${JSON.stringify(s)}`,"value",s)}function Yn(s){return m(Z(s,!0),"invalid data","value",s),s}function yt(s){return m(Z(s,32),"invalid hash","value",s),s}const Lu=zs({address:L,blockHash:yt,blockNumber:D,data:Yn,index:D,removed:H(Du,!1),topics:Li(yt),transactionHash:yt,transactionIndex:D},{index:["logIndex"]});function Uu(s){return Lu(s)}const Fu=zs({hash:H(yt),parentHash:yt,number:D,timestamp:D,nonce:H(Yn),difficulty:S,gasLimit:S,gasUsed:S,miner:H(L),extraData:Yn,baseFeePerGas:H(S)});function Mu(s){const t=Fu(s);return t.transactions=s.transactions.map(e=>typeof e=="string"?e:Xo(e)),t}const Hu=zs({transactionIndex:D,blockNumber:D,transactionHash:yt,address:L,topics:Li(yt),data:Yn,index:D,blockHash:yt},{index:["logIndex"]});function Gu(s){return Hu(s)}const Qu=zs({to:H(L,null),from:H(L,null),contractAddress:H(L,null),index:D,root:H(I),gasUsed:S,logsBloom:H(Yn),blockHash:yt,hash:yt,logs:Li(Gu),blockNumber:D,cumulativeGasUsed:S,effectiveGasPrice:H(S),status:H(D),type:H(D,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function ju(s){return Qu(s)}function Xo(s){s.to&&S(s.to)===Ba&&(s.to="0x0000000000000000000000000000000000000000");const t=zs({hash:yt,type:e=>e==="0x"||e==null?0:D(e),accessList:H(Ye,null),blockHash:H(yt,null),blockNumber:H(D,null),transactionIndex:H(D,null),from:L,gasPrice:H(S),maxPriorityFeePerGas:H(S),maxFeePerGas:H(S),gasLimit:S,to:H(L,null),value:S,nonce:D,data:Yn,creates:H(L,null),chainId:H(S,null)},{data:["input"],gasLimit:["gas"]})(s);if(t.to==null&&t.creates==null&&(t.creates=dl(t)),(s.type===1||s.type===2)&&s.accessList==null&&(t.accessList=[]),s.signature?t.signature=Nt.from(s.signature):t.signature=Nt.from(s),t.chainId==null){const e=t.signature.legacyChainId;e!=null&&(t.chainId=e)}return t.blockHash&&S(t.blockHash)===Ba&&(t.blockHash=null),t}const Ju="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class Ks{constructor(t){w(this,"name");U(this,{name:t})}clone(){return new Ks(this.name)}}class Dr extends Ks{constructor(e,n){e==null&&(e=0);super(`org.ethers.network.plugins.GasCost#${e||0}`);w(this,"effectiveBlock");w(this,"txBase");w(this,"txCreate");w(this,"txDataZero");w(this,"txDataNonzero");w(this,"txAccessListStorageKey");w(this,"txAccessListAddress");const r={effectiveBlock:e};function i(a,o){let c=(n||{})[a];c==null&&(c=o),m(typeof c=="number",`invalud value for ${a}`,"costs",n),r[a]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),U(this,r)}clone(){return new Dr(this.effectiveBlock,this)}}class Lr extends Ks{constructor(e,n){super("org.ethers.plugins.network.Ens");w(this,"address");w(this,"targetNetwork");U(this,{address:e||Ju,targetNetwork:n??1})}clone(){return new Lr(this.address,this.targetNetwork)}}var ks,Ts;class qo extends Ks{constructor(e,n){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");p(this,ks,void 0);p(this,Ts,void 0);h(this,ks,e),h(this,Ts,n)}get url(){return l(this,ks)}get processFunc(){return l(this,Ts)}clone(){return this}}ks=new WeakMap,Ts=new WeakMap;const Zr=new Map;var On,kn,ae;const nn=class nn{constructor(t,e){p(this,On,void 0);p(this,kn,void 0);p(this,ae,void 0);h(this,On,t),h(this,kn,S(e)),h(this,ae,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return l(this,On)}set name(t){h(this,On,t)}get chainId(){return l(this,kn)}set chainId(t){h(this,kn,S(t,"chainId"))}matches(t){if(t==null)return!1;if(typeof t=="string"){try{return this.chainId===S(t)}catch{}return this.name===t}if(typeof t=="number"||typeof t=="bigint"){try{return this.chainId===S(t)}catch{}return!1}if(typeof t=="object"){if(t.chainId!=null){try{return this.chainId===S(t.chainId)}catch{}return!1}return t.name!=null?this.name===t.name:!1}return!1}get plugins(){return Array.from(l(this,ae).values())}attachPlugin(t){if(l(this,ae).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return l(this,ae).set(t.name,t.clone()),this}getPlugin(t){return l(this,ae).get(t)||null}getPlugins(t){return this.plugins.filter(e=>e.name.split("#")[0]===t)}clone(){const t=new nn(this.name,this.chainId);return this.plugins.forEach(e=>{t.attachPlugin(e.clone())}),t}computeIntrinsicGas(t){const e=this.getPlugin("org.ethers.plugins.network.GasCost")||new Dr;let n=e.txBase;if(t.to==null&&(n+=e.txCreate),t.data)for(let r=2;r<t.data.length;r+=2)t.data.substring(r,r+2)==="00"?n+=e.txDataZero:n+=e.txDataNonzero;if(t.accessList){const r=Ye(t.accessList);for(const i in r)n+=e.txAccessListAddress+e.txAccessListStorageKey*r[i].storageKeys.length}return n}static from(t){if(zu(),t==null)return nn.from("mainnet");if(typeof t=="number"&&(t=BigInt(t)),typeof t=="string"||typeof t=="bigint"){const e=Zr.get(t);if(e)return e();if(typeof t=="bigint")return new nn("unknown",t);m(!1,"unknown network","network",t)}if(typeof t.clone=="function")return t.clone();if(typeof t=="object"){m(typeof t.name=="string"&&typeof t.chainId=="number","invalid network object name or chainId","network",t);const e=new nn(t.name,t.chainId);return(t.ensAddress||t.ensNetwork!=null)&&e.attachPlugin(new Lr(t.ensAddress,t.ensNetwork)),e}m(!1,"invalid network","network",t)}static register(t,e){typeof t=="number"&&(t=BigInt(t));const n=Zr.get(t);n&&m(!1,`conflicting network for ${JSON.stringify(n.name)}`,"nameOrChainId",t),Zr.set(t,e)}};On=new WeakMap,kn=new WeakMap,ae=new WeakMap;let Rt=nn;function Ia(s,t){const e=String(s);if(!e.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${s}`);const n=e.split(".");if(n.length===1&&n.push(""),n.length!==2)throw new Error(`invalid gwei value: ${s}`);for(;n[1].length<t;)n[1]+="0";if(n[1].length>9){let r=BigInt(n[1].substring(0,9));n[1].substring(9).match(/^0+$/)||r++,n[1]=r.toString()}return BigInt(n[0]+n[1])}function Oa(s){return new qo(s,async(t,e,n)=>{n.setHeader("User-Agent","ethers");let r;try{const[i,a]=await Promise.all([n.send(),t()]);r=i;const o=r.bodyJson.standard;return{gasPrice:a.gasPrice,maxFeePerGas:Ia(o.maxFee,9),maxPriorityFeePerGas:Ia(o.maxPriorityFee,9)}}catch(i){b(!1,`error encountered with polygon gas station (${JSON.stringify(n.url)})`,"SERVER_ERROR",{request:n,response:r,error:i})}})}function Vu(s){return new qo("data:",async(t,e,n)=>{const r=await t();if(r.maxFeePerGas==null||r.maxPriorityFeePerGas==null)return r;const i=r.maxFeePerGas-r.maxPriorityFeePerGas;return{gasPrice:r.gasPrice,maxFeePerGas:i+s,maxPriorityFeePerGas:s}})}let ka=!1;function zu(){if(ka)return;ka=!0;function s(t,e,n){const r=function(){const i=new Rt(t,e);return n.ensNetwork!=null&&i.attachPlugin(new Lr(null,n.ensNetwork)),i.attachPlugin(new Dr),(n.plugins||[]).forEach(a=>{i.attachPlugin(a)}),i};Rt.register(t,r),Rt.register(e,r),n.altNames&&n.altNames.forEach(i=>{Rt.register(i,r)})}s("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),s("ropsten",3,{ensNetwork:3}),s("rinkeby",4,{ensNetwork:4}),s("goerli",5,{ensNetwork:5}),s("kovan",42,{ensNetwork:42}),s("sepolia",11155111,{}),s("classic",61,{}),s("classicKotti",6,{}),s("arbitrum",42161,{ensNetwork:1}),s("arbitrum-goerli",421613,{}),s("bnb",56,{ensNetwork:1}),s("bnbt",97,{}),s("linea",59144,{ensNetwork:1}),s("linea-goerli",59140,{}),s("matic",137,{ensNetwork:1,plugins:[Oa("https://gasstation.polygon.technology/v2")]}),s("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[Oa("https://gasstation-testnet.polygon.technology/v2")]}),s("optimism",10,{ensNetwork:1,plugins:[Vu(BigInt("1000000"))]}),s("optimism-goerli",420,{}),s("xdai",100,{ensNetwork:1})}function ui(s){return JSON.parse(JSON.stringify(s))}var Qt,At,oe,Ot,Tn,ir;class Ku{constructor(t){p(this,Tn);p(this,Qt,void 0);p(this,At,void 0);p(this,oe,void 0);p(this,Ot,void 0);h(this,Qt,t),h(this,At,null),h(this,oe,4e3),h(this,Ot,-2)}get pollingInterval(){return l(this,oe)}set pollingInterval(t){h(this,oe,t)}start(){l(this,At)||(h(this,At,l(this,Qt)._setTimeout(C(this,Tn,ir).bind(this),l(this,oe))),C(this,Tn,ir).call(this))}stop(){l(this,At)&&(l(this,Qt)._clearTimeout(l(this,At)),h(this,At,null))}pause(t){this.stop(),t&&h(this,Ot,-2)}resume(){this.start()}}Qt=new WeakMap,At=new WeakMap,oe=new WeakMap,Ot=new WeakMap,Tn=new WeakSet,ir=async function(){try{const t=await l(this,Qt).getBlockNumber();if(l(this,Ot)===-2){h(this,Ot,t);return}if(t!==l(this,Ot)){for(let e=l(this,Ot)+1;e<=t;e++){if(l(this,At)==null)return;await l(this,Qt).emit("block",e)}h(this,Ot,t)}}catch{}l(this,At)!=null&&h(this,At,l(this,Qt)._setTimeout(C(this,Tn,ir).bind(this),l(this,oe)))};var De,Le,ce;class $o{constructor(t){p(this,De,void 0);p(this,Le,void 0);p(this,ce,void 0);h(this,De,t),h(this,ce,!1),h(this,Le,e=>{this._poll(e,l(this,De))})}async _poll(t,e){throw new Error("sub-classes must override this")}start(){l(this,ce)||(h(this,ce,!0),l(this,Le).call(this,-2),l(this,De).on("block",l(this,Le)))}stop(){l(this,ce)&&(h(this,ce,!1),l(this,De).off("block",l(this,Le)))}pause(t){this.stop()}resume(){this.start()}}De=new WeakMap,Le=new WeakMap,ce=new WeakMap;var Ir;class Wu extends $o{constructor(e,n){super(e);p(this,Ir,void 0);h(this,Ir,ui(n))}async _poll(e,n){throw new Error("@TODO")}}Ir=new WeakMap;var Rn;class Zu extends $o{constructor(e,n){super(e);p(this,Rn,void 0);h(this,Rn,n)}async _poll(e,n){const r=await n.getTransactionReceipt(l(this,Rn));r&&n.emit(l(this,Rn),r)}}Rn=new WeakMap;var jt,Dn,Ln,le,mt,Or,tc;class Ui{constructor(t,e){p(this,Or);p(this,jt,void 0);p(this,Dn,void 0);p(this,Ln,void 0);p(this,le,void 0);p(this,mt,void 0);h(this,jt,t),h(this,Dn,ui(e)),h(this,Ln,C(this,Or,tc).bind(this)),h(this,le,!1),h(this,mt,-2)}start(){l(this,le)||(h(this,le,!0),l(this,mt)===-2&&l(this,jt).getBlockNumber().then(t=>{h(this,mt,t)}),l(this,jt).on("block",l(this,Ln)))}stop(){l(this,le)&&(h(this,le,!1),l(this,jt).off("block",l(this,Ln)))}pause(t){this.stop(),t&&h(this,mt,-2)}resume(){this.start()}}jt=new WeakMap,Dn=new WeakMap,Ln=new WeakMap,le=new WeakMap,mt=new WeakMap,Or=new WeakSet,tc=async function(t){if(l(this,mt)===-2)return;const e=ui(l(this,Dn));e.fromBlock=l(this,mt)+1,e.toBlock=t;const n=await l(this,jt).getLogs(e);if(n.length===0){l(this,mt)<t-60&&h(this,mt,t-60);return}for(const r of n)l(this,jt).emit(l(this,Dn),r),h(this,mt,r.blockNumber)};const Yu=BigInt(2),_u=10;function sr(s){return s&&typeof s.then=="function"}function ar(s,t){return s+":"+JSON.stringify(t,(e,n)=>{if(n==null)return"null";if(typeof n=="bigint")return`bigint:${n.toString()}`;if(typeof n=="string")return n.toLowerCase();if(typeof n=="object"&&!Array.isArray(n)){const r=Object.keys(n);return r.sort(),r.reduce((i,a)=>(i[a]=n[a],i),{})}return n})}class Cr{constructor(t){w(this,"name");U(this,{name:t})}start(){}stop(){}pause(t){}resume(){}}function Xu(s){return JSON.parse(JSON.stringify(s))}function hi(s){return s=Array.from(new Set(s).values()),s.sort(),s}async function Yr(s,t){if(s==null)throw new Error("invalid event");if(Array.isArray(s)&&(s={topics:s}),typeof s=="string")switch(s){case"block":case"pending":case"debug":case"error":case"network":return{type:s,tag:s}}if(Z(s,32)){const e=s.toLowerCase();return{type:"transaction",tag:ar("tx",{hash:e}),hash:e}}if(s.orphan){const e=s;return{type:"orphan",tag:ar("orphan",e),filter:Xu(e)}}if(s.address||s.topics){const e=s,n={topics:(e.topics||[]).map(r=>r==null?null:Array.isArray(r)?hi(r.map(i=>i.toLowerCase())):r.toLowerCase())};if(e.address){const r=[],i=[],a=o=>{Z(o)?r.push(o):i.push((async()=>{r.push(await it(o,t))})())};Array.isArray(e.address)?e.address.forEach(a):a(e.address),i.length&&await Promise.all(i),n.address=hi(r.map(o=>o.toLowerCase()))}return{filter:n,tag:ar("event",n),type:"event"}}m(!1,"unknown ProviderEvent","event",s)}function _r(){return new Date().getTime()}const qu={cacheTimeout:250,pollingInterval:4e3};var Y,ue,_,Un,ut,Ue,he,Jt,Rs,wt,Fn,Mn,nt,gt,Ds,fi,Ls,di,Fe,ns,Us,gi,Me,ss,Hn,or;class $u{constructor(t,e){p(this,nt);p(this,Ds);p(this,Ls);p(this,Fe);p(this,Us);p(this,Me);p(this,Hn);p(this,Y,void 0);p(this,ue,void 0);p(this,_,void 0);p(this,Un,void 0);p(this,ut,void 0);p(this,Ue,void 0);p(this,he,void 0);p(this,Jt,void 0);p(this,Rs,void 0);p(this,wt,void 0);p(this,Fn,void 0);p(this,Mn,void 0);if(h(this,Mn,Object.assign({},qu,e||{})),t==="any")h(this,Ue,!0),h(this,ut,null);else if(t){const n=Rt.from(t);h(this,Ue,!1),h(this,ut,Promise.resolve(n)),setTimeout(()=>{this.emit("network",n,null)},0)}else h(this,Ue,!1),h(this,ut,null);h(this,Jt,-1),h(this,he,new Map),h(this,Y,new Map),h(this,ue,new Map),h(this,_,null),h(this,Un,!1),h(this,Rs,1),h(this,wt,new Map),h(this,Fn,!1)}get pollingInterval(){return l(this,Mn).pollingInterval}get provider(){return this}get plugins(){return Array.from(l(this,ue).values())}attachPlugin(t){if(l(this,ue).get(t.name))throw new Error(`cannot replace existing plugin: ${t.name} `);return l(this,ue).set(t.name,t.connect(this)),this}getPlugin(t){return l(this,ue).get(t)||null}get disableCcipRead(){return l(this,Fn)}set disableCcipRead(t){h(this,Fn,!!t)}async ccipReadFetch(t,e,n){if(this.disableCcipRead||n.length===0||t.to==null)return null;const r=t.to.toLowerCase(),i=e.toLowerCase(),a=[];for(let o=0;o<n.length;o++){const c=n[o],u=c.replace("{sender}",r).replace("{data}",i),d=new Zt(u);c.indexOf("{data}")===-1&&(d.body={data:i,sender:r}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:d,index:o,urls:n});let f="unknown error";const g=await d.send();try{const A=g.bodyJson;if(A.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:d,result:A}),A.data;A.message&&(f=A.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:d,result:A})}catch{}b(g.statusCode<400||g.statusCode>=500,`response not found during CCIP fetch: ${f}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:t,info:{url:c,errorMessage:f}}),a.push(f)}b(!1,`error encountered during CCIP fetch: ${a.map(o=>JSON.stringify(o)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:t,info:{urls:n,errorMessages:a}})}_wrapBlock(t,e){return new yu(Mu(t),this)}_wrapLog(t,e){return new Vs(Uu(t),this)}_wrapTransactionReceipt(t,e){return new Ho(ju(t),this)}_wrapTransactionResponse(t,e){return new Cs(Xo(t),this)}_detectNetwork(){b(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(t){b(!1,`unsupported method: ${t.method}`,"UNSUPPORTED_OPERATION",{operation:t.method,info:t})}async getBlockNumber(){const t=D(await C(this,nt,gt).call(this,{method:"getBlockNumber"}),"%response");return l(this,Jt)>=0&&h(this,Jt,t),t}_getAddress(t){return it(t,this)}_getBlockTag(t){if(t==null)return"latest";switch(t){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return t}if(Z(t))return Z(t,32)?t:tn(t);if(typeof t=="bigint"&&(t=D(t,"blockTag")),typeof t=="number")return t>=0?tn(t):l(this,Jt)>=0?tn(l(this,Jt)+t):this.getBlockNumber().then(e=>tn(e+t));m(!1,"invalid blockTag","blockTag",t)}_getFilter(t){const e=(t.topics||[]).map(c=>c==null?null:Array.isArray(c)?hi(c.map(u=>u.toLowerCase())):c.toLowerCase()),n="blockHash"in t?t.blockHash:void 0,r=(c,u,d)=>{let f;switch(c.length){case 0:break;case 1:f=c[0];break;default:c.sort(),f=c}if(n&&(u!=null||d!=null))throw new Error("invalid filter");const g={};return f&&(g.address=f),e.length&&(g.topics=e),u&&(g.fromBlock=u),d&&(g.toBlock=d),n&&(g.blockHash=n),g};let i=[];if(t.address)if(Array.isArray(t.address))for(const c of t.address)i.push(this._getAddress(c));else i.push(this._getAddress(t.address));let a;"fromBlock"in t&&(a=this._getBlockTag(t.fromBlock));let o;return"toBlock"in t&&(o=this._getBlockTag(t.toBlock)),i.filter(c=>typeof c!="string").length||a!=null&&typeof a!="string"||o!=null&&typeof o!="string"?Promise.all([Promise.all(i),a,o]).then(c=>r(c[0],c[1],c[2])):r(i,a,o)}_getTransactionRequest(t){const e=br(t),n=[];if(["to","from"].forEach(r=>{if(e[r]==null)return;const i=it(e[r]);sr(i)?n.push(async function(){e[r]=await i}()):e[r]=i}),e.blockTag!=null){const r=this._getBlockTag(e.blockTag);sr(r)?n.push(async function(){e.blockTag=await r}()):e.blockTag=r}return n.length?async function(){return await Promise.all(n),e}():e}async getNetwork(){if(l(this,ut)==null){const r=this._detectNetwork().then(i=>(this.emit("network",i,null),i),i=>{throw l(this,ut)===r&&h(this,ut,null),i});return h(this,ut,r),(await r).clone()}const t=l(this,ut),[e,n]=await Promise.all([t,this._detectNetwork()]);return e.chainId!==n.chainId&&(l(this,Ue)?(this.emit("network",n,e),l(this,ut)===t&&h(this,ut,Promise.resolve(n))):b(!1,`network changed: ${e.chainId} => ${n.chainId} `,"NETWORK_ERROR",{event:"changed"})),e.clone()}async getFeeData(){const t=await this.getNetwork(),e=async()=>{const{_block:r,gasPrice:i}=await $({_block:C(this,Us,gi).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await C(this,nt,gt).call(this,{method:"getGasPrice"});return S(u,"%response")}catch{}return null})()});let a=null,o=null;const c=this._wrapBlock(r,t);return c&&c.baseFeePerGas&&(o=BigInt("1000000000"),a=c.baseFeePerGas*Yu+o),new Sa(i,a,o)},n=t.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const r=new Zt(n.url),i=await n.processFunc(e,this,r);return new Sa(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await e()}async estimateGas(t){let e=this._getTransactionRequest(t);return sr(e)&&(e=await e),S(await C(this,nt,gt).call(this,{method:"estimateGas",transaction:e}),"%response")}async call(t){const{tx:e,blockTag:n}=await $({tx:this._getTransactionRequest(t),blockTag:this._getBlockTag(t.blockTag)});return await C(this,Ls,di).call(this,C(this,Ds,fi).call(this,e,n,t.enableCcipRead?0:-1))}async getBalance(t,e){return S(await C(this,Fe,ns).call(this,{method:"getBalance"},t,e),"%response")}async getTransactionCount(t,e){return D(await C(this,Fe,ns).call(this,{method:"getTransactionCount"},t,e),"%response")}async getCode(t,e){return I(await C(this,Fe,ns).call(this,{method:"getCode"},t,e))}async getStorage(t,e,n){const r=S(e,"position");return I(await C(this,Fe,ns).call(this,{method:"getStorage",position:r},t,n))}async broadcastTransaction(t){const{blockNumber:e,hash:n,network:r}=await $({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:t}),network:this.getNetwork()}),i=wr.from(t);if(i.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,r).replaceableTransaction(e)}async getBlock(t,e){const{network:n,params:r}=await $({network:this.getNetwork(),params:C(this,Us,gi).call(this,t,!!e)});return r==null?null:this._wrapBlock(r,n)}async getTransaction(t){const{network:e,params:n}=await $({network:this.getNetwork(),params:C(this,nt,gt).call(this,{method:"getTransaction",hash:t})});return n==null?null:this._wrapTransactionResponse(n,e)}async getTransactionReceipt(t){const{network:e,params:n}=await $({network:this.getNetwork(),params:C(this,nt,gt).call(this,{method:"getTransactionReceipt",hash:t})});if(n==null)return null;if(n.gasPrice==null&&n.effectiveGasPrice==null){const r=await C(this,nt,gt).call(this,{method:"getTransaction",hash:t});if(r==null)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=r.gasPrice}return this._wrapTransactionReceipt(n,e)}async getTransactionResult(t){const{result:e}=await $({network:this.getNetwork(),result:C(this,nt,gt).call(this,{method:"getTransactionResult",hash:t})});return e==null?null:I(e)}async getLogs(t){let e=this._getFilter(t);sr(e)&&(e=await e);const{network:n,params:r}=await $({network:this.getNetwork(),params:C(this,nt,gt).call(this,{method:"getLogs",filter:e})});return r.map(i=>this._wrapLog(i,n))}_getProvider(t){b(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(t){return await Pr.fromName(this,t)}async getAvatar(t){const e=await this.getResolver(t);return e?await e.getAvatar():null}async resolveName(t){const e=await this.getResolver(t);return e?await e.getAddress():null}async lookupAddress(t){t=L(t);const e=ai(t.substring(2).toLowerCase()+".addr.reverse");try{const n=await Pr.getEnsAddress(this),i=await new cs(n,["function resolver(bytes32) view returns (address)"],this).resolver(e);if(i==null||i===si)return null;const o=await new cs(i,["function name(bytes32) view returns (string)"],this).name(e);return await this.resolveName(o)!==t?null:o}catch(n){if(Wt(n,"BAD_DATA")&&n.value==="0x"||Wt(n,"CALL_EXCEPTION"))return null;throw n}return null}async waitForTransaction(t,e,n){const r=e??1;return r===0?this.getTransactionReceipt(t):new Promise(async(i,a)=>{let o=null;const c=async u=>{try{const d=await this.getTransactionReceipt(t);if(d!=null&&u-d.blockNumber+1>=r){i(d),o&&(clearTimeout(o),o=null);return}}catch(d){console.log("EEE",d)}this.once("block",c)};n!=null&&(o=setTimeout(()=>{o!=null&&(o=null,this.off("block",c),a(J("timeout","TIMEOUT",{reason:"timeout"})))},n)),c(await this.getBlockNumber())})}async waitForBlock(t){b(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(t){const e=l(this,wt).get(t);e&&(e.timer&&clearTimeout(e.timer),l(this,wt).delete(t))}_setTimeout(t,e){e==null&&(e=0);const n=Zs(this,Rs)._++,r=()=>{l(this,wt).delete(n),t()};if(this.paused)l(this,wt).set(n,{timer:null,func:r,time:e});else{const i=setTimeout(r,e);l(this,wt).set(n,{timer:i,func:r,time:_r()})}return n}_forEachSubscriber(t){for(const e of l(this,Y).values())t(e.subscriber)}_getSubscriber(t){switch(t.type){case"debug":case"error":case"network":return new Cr(t.type);case"block":{const e=new Ku(this);return e.pollingInterval=this.pollingInterval,e}case"event":return new Ui(this,t.filter);case"transaction":return new Zu(this,t.hash);case"orphan":return new Wu(this,t.filter)}throw new Error(`unsupported event: ${t.type}`)}_recoverSubscriber(t,e){for(const n of l(this,Y).values())if(n.subscriber===t){n.started&&n.subscriber.stop(),n.subscriber=e,n.started&&e.start(),l(this,_)!=null&&e.pause(l(this,_));break}}async on(t,e){const n=await C(this,Hn,or).call(this,t);return n.listeners.push({listener:e,once:!1}),n.started||(n.subscriber.start(),n.started=!0,l(this,_)!=null&&n.subscriber.pause(l(this,_))),this}async once(t,e){const n=await C(this,Hn,or).call(this,t);return n.listeners.push({listener:e,once:!0}),n.started||(n.subscriber.start(),n.started=!0,l(this,_)!=null&&n.subscriber.pause(l(this,_))),this}async emit(t,...e){const n=await C(this,Me,ss).call(this,t,e);if(!n||n.listeners.length===0)return!1;const r=n.listeners.length;return n.listeners=n.listeners.filter(({listener:i,once:a})=>{const o=new Ka(this,a?null:i,t);try{i.call(this,...e,o)}catch{}return!a}),n.listeners.length===0&&(n.started&&n.subscriber.stop(),l(this,Y).delete(n.tag)),r>0}async listenerCount(t){if(t){const n=await C(this,Me,ss).call(this,t);return n?n.listeners.length:0}let e=0;for(const{listeners:n}of l(this,Y).values())e+=n.length;return e}async listeners(t){if(t){const n=await C(this,Me,ss).call(this,t);return n?n.listeners.map(({listener:r})=>r):[]}let e=[];for(const{listeners:n}of l(this,Y).values())e=e.concat(n.map(({listener:r})=>r));return e}async off(t,e){const n=await C(this,Me,ss).call(this,t);if(!n)return this;if(e){const r=n.listeners.map(({listener:i})=>i).indexOf(e);r>=0&&n.listeners.splice(r,1)}return(!e||n.listeners.length===0)&&(n.started&&n.subscriber.stop(),l(this,Y).delete(n.tag)),this}async removeAllListeners(t){if(t){const{tag:e,started:n,subscriber:r}=await C(this,Hn,or).call(this,t);n&&r.stop(),l(this,Y).delete(e)}else for(const[e,{started:n,subscriber:r}]of l(this,Y))n&&r.stop(),l(this,Y).delete(e);return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return this.off(t,e)}get destroyed(){return l(this,Un)}destroy(){this.removeAllListeners();for(const t of l(this,wt).keys())this._clearTimeout(t);h(this,Un,!0)}get paused(){return l(this,_)!=null}set paused(t){!!t!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(t){if(h(this,Jt,-1),l(this,_)!=null){if(l(this,_)==!!t)return;b(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(e=>e.pause(t)),h(this,_,!!t);for(const e of l(this,wt).values())e.timer&&clearTimeout(e.timer),e.time=_r()-e.time}resume(){if(l(this,_)!=null){this._forEachSubscriber(t=>t.resume()),h(this,_,null);for(const t of l(this,wt).values()){let e=t.time;e<0&&(e=0),t.time=_r(),setTimeout(t.func,e)}}}}Y=new WeakMap,ue=new WeakMap,_=new WeakMap,Un=new WeakMap,ut=new WeakMap,Ue=new WeakMap,he=new WeakMap,Jt=new WeakMap,Rs=new WeakMap,wt=new WeakMap,Fn=new WeakMap,Mn=new WeakMap,nt=new WeakSet,gt=async function(t){const e=l(this,Mn).cacheTimeout;if(e<0)return await this._perform(t);const n=ar(t.method,t);let r=l(this,he).get(n);return r||(r=this._perform(t),l(this,he).set(n,r),setTimeout(()=>{l(this,he).get(n)===r&&l(this,he).delete(n)},e)),await r},Ds=new WeakSet,fi=async function(t,e,n){b(n<_u,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},t,{blockTag:e,enableCcipRead:!0})});const r=br(t);try{return I(await this._perform({method:"call",transaction:r,blockTag:e}))}catch(i){if(!this.disableCcipRead&&Ci(i)&&i.data&&n>=0&&e==="latest"&&r.to!=null&&X(i.data,0,4)==="0x556f1830"){const a=i.data,o=await it(r.to,this);let c;try{c=rh(X(i.data,4))}catch(f){b(!1,f.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:r,info:{data:a}})}b(c.sender.toLowerCase()===o.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:a,reason:"OffchainLookup",transaction:r,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const u=await this.ccipReadFetch(r,c.calldata,c.urls);b(u!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:r,info:{data:i.data,errorArgs:c.errorArgs}});const d={to:o,data:at([c.selector,sh([u,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:d});try{const f=await C(this,Ds,fi).call(this,d,e,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},d),result:f}),f}catch(f){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},d),error:f}),f}}throw i}},Ls=new WeakSet,di=async function(t){const{value:e}=await $({network:this.getNetwork(),value:t});return e},Fe=new WeakSet,ns=async function(t,e,n){let r=this._getAddress(e),i=this._getBlockTag(n);return(typeof r!="string"||typeof i!="string")&&([r,i]=await Promise.all([r,i])),await C(this,Ls,di).call(this,C(this,nt,gt).call(this,Object.assign(t,{address:r,blockTag:i})))},Us=new WeakSet,gi=async function(t,e){if(Z(t,32))return await C(this,nt,gt).call(this,{method:"getBlock",blockHash:t,includeTransactions:e});let n=this._getBlockTag(t);return typeof n!="string"&&(n=await n),await C(this,nt,gt).call(this,{method:"getBlock",blockTag:n,includeTransactions:e})},Me=new WeakSet,ss=async function(t,e){let n=await Yr(t,this);return n.type==="event"&&e&&e.length>0&&e[0].removed===!0&&(n=await Yr({orphan:"drop-log",log:e[0]},this)),l(this,Y).get(n.tag)||null},Hn=new WeakSet,or=async function(t){const e=await Yr(t,this),n=e.tag;let r=l(this,Y).get(n);return r||(r={subscriber:this._getSubscriber(e),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},l(this,Y).set(n,r)),r};function th(s,t){try{const e=pi(s,t);if(e)return Ua(e)}catch{}return null}function pi(s,t){if(s==="0x")return null;try{const e=D(X(s,t,t+32)),n=D(X(s,e,e+32));return X(s,e+32,e+32+n)}catch{}return null}function Ta(s){const t=xt(s);if(t.length>32)throw new Error("internal; should not happen");const e=new Uint8Array(32);return e.set(t,32-t.length),e}function eh(s){if(s.length%32===0)return s;const t=new Uint8Array(Math.ceil(s.length/32)*32);return t.set(s),t}const nh=new Uint8Array([]);function sh(s){const t=[];let e=0;for(let n=0;n<s.length;n++)t.push(nh),e+=32;for(let n=0;n<s.length;n++){const r=G(s[n]);t[n]=Ta(e),t.push(Ta(r.length)),t.push(eh(r)),e+=32+Math.ceil(r.length/32)*32}return at(t)}const Ra="0x0000000000000000000000000000000000000000000000000000000000000000";function rh(s){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};b(sn(s)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const e=X(s,0,32);b(X(e,0,12)===X(Ra,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=X(e,12);try{const n=[],r=D(X(s,32,64)),i=D(X(s,r,r+32)),a=X(s,r+32);for(let o=0;o<i;o++){const c=th(a,o*32);if(c==null)throw new Error("abort");n.push(c)}t.urls=n}catch{b(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=pi(s,64);if(n==null)throw new Error("abort");t.calldata=n}catch{b(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}b(X(s,100,128)===X(Ra,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=X(s,96,100);try{const n=pi(s,128);if(n==null)throw new Error("abort");t.extraData=n}catch{b(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(n=>t[n]),t}function Xe(s,t){if(s.provider)return s.provider;b(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function Da(s,t){let e=br(t);if(e.to!=null&&(e.to=it(e.to,s)),e.from!=null){const n=e.from;e.from=Promise.all([s.getAddress(),it(n,s)]).then(([r,i])=>(m(r.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),r))}else e.from=s.getAddress();return await $(e)}class ih{constructor(t){w(this,"provider");U(this,{provider:t||null})}async getNonce(t){return Xe(this,"getTransactionCount").getTransactionCount(await this.getAddress(),t)}async populateCall(t){return await Da(this,t)}async populateTransaction(t){const e=Xe(this,"populateTransaction"),n=await Da(this,t);n.nonce==null&&(n.nonce=await this.getNonce("pending")),n.gasLimit==null&&(n.gasLimit=await this.estimateGas(n));const r=await this.provider.getNetwork();if(n.chainId!=null){const a=S(n.chainId);m(a===r.chainId,"transaction chainId mismatch","tx.chainId",t.chainId)}else n.chainId=r.chainId;const i=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||i)?m(!1,"eip-1559 transaction do not support gasPrice","tx",t):(n.type===0||n.type===1)&&i&&m(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1){const a=await e.getFeeData();b(a.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),n.gasPrice==null&&(n.gasPrice=a.gasPrice)}else{const a=await e.getFeeData();if(n.type==null)if(a.maxFeePerGas!=null&&a.maxPriorityFeePerGas!=null)if(n.type=2,n.gasPrice!=null){const o=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=o,n.maxPriorityFeePerGas=o}else n.maxFeePerGas==null&&(n.maxFeePerGas=a.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=a.maxPriorityFeePerGas);else a.gasPrice!=null?(b(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=a.gasPrice),n.type=0):b(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else n.type===2&&(n.maxFeePerGas==null&&(n.maxFeePerGas=a.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=a.maxPriorityFeePerGas))}return await $(n)}async estimateGas(t){return Xe(this,"estimateGas").estimateGas(await this.populateCall(t))}async call(t){return Xe(this,"call").call(await this.populateCall(t))}async resolveName(t){return await Xe(this,"resolveName").resolveName(t)}async sendTransaction(t){const e=Xe(this,"sendTransaction"),n=await this.populateTransaction(t);delete n.from;const r=wr.from(n);return await e.broadcastTransaction(await this.signTransaction(r))}}function ah(s){return JSON.parse(JSON.stringify(s))}var st,kt,He,fe,Ge,Gn,Fs,Ai,Ms,mi;class ec{constructor(t){p(this,Fs);p(this,Ms);p(this,st,void 0);p(this,kt,void 0);p(this,He,void 0);p(this,fe,void 0);p(this,Ge,void 0);p(this,Gn,void 0);h(this,st,t),h(this,kt,null),h(this,He,C(this,Fs,Ai).bind(this)),h(this,fe,!1),h(this,Ge,null),h(this,Gn,!1)}_subscribe(t){throw new Error("subclasses must override this")}_emitResults(t,e){throw new Error("subclasses must override this")}_recover(t){throw new Error("subclasses must override this")}start(){l(this,fe)||(h(this,fe,!0),C(this,Fs,Ai).call(this,-2))}stop(){l(this,fe)&&(h(this,fe,!1),h(this,Gn,!0),C(this,Ms,mi).call(this),l(this,st).off("block",l(this,He)))}pause(t){t&&C(this,Ms,mi).call(this),l(this,st).off("block",l(this,He))}resume(){this.start()}}st=new WeakMap,kt=new WeakMap,He=new WeakMap,fe=new WeakMap,Ge=new WeakMap,Gn=new WeakMap,Fs=new WeakSet,Ai=async function(t){try{l(this,kt)==null&&h(this,kt,this._subscribe(l(this,st)));let e=null;try{e=await l(this,kt)}catch(i){if(!Wt(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(e==null){h(this,kt,null),l(this,st)._recoverSubscriber(this,this._recover(l(this,st)));return}const n=await l(this,st).getNetwork();if(l(this,Ge)||h(this,Ge,n),l(this,Ge).chainId!==n.chainId)throw new Error("chaid changed");if(l(this,Gn))return;const r=await l(this,st).send("eth_getFilterChanges",[e]);await this._emitResults(l(this,st),r)}catch(e){console.log("@TODO",e)}l(this,st).once("block",l(this,He))},Ms=new WeakSet,mi=function(){const t=l(this,kt);t&&(h(this,kt,null),t.then(e=>{l(this,st).send("eth_uninstallFilter",[e])}))};var Qe;class oh extends ec{constructor(e,n){super(e);p(this,Qe,void 0);h(this,Qe,ah(n))}_recover(e){return new Ui(e,l(this,Qe))}async _subscribe(e){return await e.send("eth_newFilter",[l(this,Qe)])}async _emitResults(e,n){for(const r of n)e.emit(l(this,Qe),e._wrapLog(r,e._network))}}Qe=new WeakMap;class ch extends ec{async _subscribe(t){return await t.send("eth_newPendingTransactionFilter",[])}async _emitResults(t,e){for(const n of e)t.emit("pending",n)}}const lh="bigint,boolean,function,number,string,symbol".split(/,/g);function cr(s){if(s==null||lh.indexOf(typeof s)>=0||typeof s.getAddress=="function")return s;if(Array.isArray(s))return s.map(cr);if(typeof s=="object")return Object.keys(s).reduce((t,e)=>(t[e]=s[e],t),{});throw new Error(`should not happen: ${s} (${typeof s})`)}function uh(s){return new Promise(t=>{setTimeout(t,s)})}function qe(s){return s&&s.toLowerCase()}function La(s){return s&&typeof s.pollingInterval=="number"}const hh={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class Xr extends ih{constructor(e,n){super(e);w(this,"address");n=L(n),U(this,{address:n})}connect(e){b(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const n=cr(e),r=[];if(n.from){const a=n.from;r.push((async()=>{const o=await it(a,this.provider);m(o!=null&&o.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=o})())}else n.from=this.address;if(n.gasLimit==null&&r.push((async()=>{n.gasLimit=await this.provider.estimateGas({...n,from:this.address})})()),n.to!=null){const a=n.to;r.push((async()=>{n.to=await it(a,this.provider)})())}r.length&&await Promise.all(r);const i=this.provider.getRpcTransaction(n);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(e){const n=await this.provider.getBlockNumber(),r=await this.sendUncheckedTransaction(e);return await new Promise((i,a)=>{const o=[1e3,100],c=async()=>{const u=await this.provider.getTransaction(r);if(u!=null){i(u.replaceableTransaction(n));return}this.provider._setTimeout(()=>{c()},o.pop()||4e3)};c()})}async signTransaction(e){const n=cr(e);if(n.from){const i=await it(n.from,this.provider);m(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),n.from=i}else n.from=this.address;const r=this.provider.getRpcTransaction(n);return await this.provider.send("eth_signTransaction",[r])}async signMessage(e){const n=typeof e=="string"?Ke(e):e;return await this.provider.send("personal_sign",[I(n),this.address.toLowerCase()])}async signTypedData(e,n,r){const i=cr(r),a=await yr.resolveNames(e,n,i,async o=>{const c=await it(o);return m(c!=null,"TypedData does not support null address","value",o),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(yr.getPayload(a.domain,n,a.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const n=typeof e=="string"?Ke(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),I(n)])}}var je,Qn,Vt,Tt,Ct,zt,Hs,wi;class nc extends $u{constructor(e,n){super(e,n);p(this,Hs);p(this,je,void 0);p(this,Qn,void 0);p(this,Vt,void 0);p(this,Tt,void 0);p(this,Ct,void 0);p(this,zt,void 0);h(this,Qn,1),h(this,je,Object.assign({},hh,n||{})),h(this,Vt,[]),h(this,Tt,null),h(this,zt,null);{let i=null;const a=new Promise(o=>{i=o});h(this,Ct,{promise:a,resolve:i})}const r=this._getOption("staticNetwork");r&&(m(e==null||r.matches(e),"staticNetwork MUST match network object","options",n),h(this,zt,r))}_getOption(e){return l(this,je)[e]}get _network(){return b(l(this,zt),"network is not available yet","NETWORK_ERROR"),l(this,zt)}async _perform(e){if(e.method==="call"||e.method==="estimateGas"){let r=e.transaction;if(r&&r.type!=null&&S(r.type)&&r.maxFeePerGas==null&&r.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(e=Object.assign({},e,{transaction:Object.assign({},r,{type:void 0})}))}}const n=this.getRpcRequest(e);return n!=null?await this.send(n.method,n.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e)return e;if(this.ready)return Rt.from(S(await this.send("eth_chainId",[])));const n={id:Zs(this,Qn)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:n});let r;try{r=(await this._send(n))[0]}catch(i){throw this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:r}),"result"in r)return Rt.from(S(r.result));throw this.getRpcError(n,r)}_start(){l(this,Ct)==null||l(this,Ct).resolve==null||(l(this,Ct).resolve(),h(this,Ct,null),(async()=>{for(;l(this,zt)==null&&!this.destroyed;)try{h(this,zt,await this._detectNetwork())}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",J("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await uh(1e3)}C(this,Hs,wi).call(this)})())}async _waitUntilReady(){if(l(this,Ct)!=null)return await l(this,Ct).promise}_getSubscriber(e){return e.type==="pending"?new ch(this):e.type==="event"?this._getOption("polling")?new Ui(this,e.filter):new oh(this,e.filter):e.type==="orphan"&&e.filter.orphan==="drop-log"?new Cr("orphan"):super._getSubscriber(e)}get ready(){return l(this,Ct)==null}getRpcTransaction(e){const n={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(r=>{if(e[r]==null)return;let i=r;r==="gasLimit"&&(i="gas"),n[i]=tn(S(e[r],`tx.${r}`))}),["from","to","data"].forEach(r=>{e[r]!=null&&(n[r]=I(e[r]))}),e.accessList&&(n.accessList=Ye(e.accessList)),n}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getBalance":return{method:"eth_getBalance",args:[qe(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[qe(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[qe(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[qe(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&e.filter.address!=null&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(qe):e.filter.address=qe(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,n){const{method:r}=e,{error:i}=n;if(r==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return J("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:i}})}if(r==="eth_call"||r==="eth_estimateGas"){const c=yi(i),u=Ac.getBuiltinCallException(r==="eth_call"?"call":"estimateGas",e.params[0],c?c.data:null);return u.info={error:i,payload:e},u}const a=JSON.stringify(gh(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return J("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[r]||"unknown",reason:"rejected",info:{payload:e,error:i}});if(r==="eth_sendRawTransaction"||r==="eth_sendTransaction"){const c=e.params[0];if(a.match(/insufficient funds|base fee exceeds gas limit/i))return J("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(a.match(/nonce/i)&&a.match(/too low/i))return J("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(a.match(/replacement transaction/i)&&a.match(/underpriced/i))return J("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(a.match(/only replay-protected/i))return J("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:r,info:{transaction:c,info:{error:i}}})}let o=!!a.match(/the method .* does not exist/i);return o||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(o=!0),o?J("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:i,payload:e}}):J("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:e})}send(e,n){if(this.destroyed)return Promise.reject(J("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const r=Zs(this,Qn)._++,i=new Promise((a,o)=>{l(this,Vt).push({resolve:a,reject:o,payload:{method:e,params:n,id:r,jsonrpc:"2.0"}})});return C(this,Hs,wi).call(this),i}async getSigner(e){e==null&&(e=0);const n=this.send("eth_accounts",[]);if(typeof e=="number"){const i=await n;if(e>=i.length)throw new Error("no such account");return new Xr(this,i[e])}const{accounts:r}=await $({network:this.getNetwork(),accounts:n});e=L(e);for(const i of r)if(L(i)===e)return new Xr(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(n=>new Xr(this,n))}destroy(){l(this,Tt)&&(clearTimeout(l(this,Tt)),h(this,Tt,null));for(const{payload:e,reject:n}of l(this,Vt))n(J("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));h(this,Vt,[]),super.destroy()}}je=new WeakMap,Qn=new WeakMap,Vt=new WeakMap,Tt=new WeakMap,Ct=new WeakMap,zt=new WeakMap,Hs=new WeakSet,wi=function(){if(l(this,Tt))return;const e=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");h(this,Tt,setTimeout(()=>{h(this,Tt,null);const n=l(this,Vt);for(h(this,Vt,[]);n.length;){const r=[n.shift()];for(;n.length&&r.length!==l(this,je).batchMaxCount;)if(r.push(n.shift()),JSON.stringify(r.map(a=>a.payload)).length>l(this,je).batchMaxSize){n.unshift(r.pop());break}(async()=>{const i=r.length===1?r[0].payload:r.map(a=>a.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const a=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:a});for(const{resolve:o,reject:c,payload:u}of r){if(this.destroyed){c(J("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:u.method}));continue}const d=a.filter(f=>f.id===u.id)[0];if(d==null){const f=J("missing response for request","BAD_DATA",{value:a,info:{payload:u}});this.emit("error",f),c(f);continue}if("error"in d){c(this.getRpcError(u,d));continue}o(d.result)}}catch(a){this.emit("debug",{action:"receiveRpcError",error:a});for(const{reject:o}of r)o(a)}})()}},e))};var de;class fh extends nc{constructor(e,n){super(e,n);p(this,de,void 0);h(this,de,4e3)}_getSubscriber(e){const n=super._getSubscriber(e);return La(n)&&(n.pollingInterval=l(this,de)),n}get pollingInterval(){return l(this,de)}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");h(this,de,e),this._forEachSubscriber(n=>{La(n)&&(n.pollingInterval=l(this,de))})}}de=new WeakMap;var jn;class dh extends fh{constructor(e,n,r){e==null&&(e="http://localhost:8545");super(n,r);p(this,jn,void 0);typeof e=="string"?h(this,jn,new Zt(e)):h(this,jn,e.clone())}_getConnection(){return l(this,jn).clone()}async send(e,n){return await this._start(),await super.send(e,n)}async _send(e){const n=this._getConnection();n.body=JSON.stringify(e),n.setHeader("content-type","application/json");const r=await n.send();r.assertOk();let i=r.bodyJson;return Array.isArray(i)||(i=[i]),i}}jn=new WeakMap;function yi(s){if(s==null)return null;if(typeof s.message=="string"&&s.message.match(/revert/i)&&Z(s.data))return{message:s.message,data:s.data};if(typeof s=="object"){for(const t in s){const e=yi(s[t]);if(e)return e}return null}if(typeof s=="string")try{return yi(JSON.parse(s))}catch{}return null}function bi(s,t){if(s!=null){if(typeof s.message=="string"&&t.push(s.message),typeof s=="object")for(const e in s)bi(s[e],t);if(typeof s=="string")try{return bi(JSON.parse(s),t)}catch{}}}function gh(s){const t=[];return bi(s,t),t}function ph(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const Ah=ph().WebSocket;var Kt,Gs,ge,Je,pe;class Fi{constructor(t,e){p(this,Kt,void 0);p(this,Gs,void 0);p(this,ge,void 0);p(this,Je,void 0);p(this,pe,void 0);h(this,Kt,t),h(this,Gs,JSON.stringify(e)),h(this,ge,null),h(this,Je,null),h(this,pe,null)}get filter(){return JSON.parse(l(this,Gs))}start(){h(this,ge,l(this,Kt).send("eth_subscribe",this.filter).then(t=>(l(this,Kt)._register(t,this),t)))}stop(){l(this,ge).then(t=>{l(this,Kt).send("eth_unsubscribe",[t])}),h(this,ge,null)}pause(t){b(t,"preserve logs while paused not supported by SocketSubscriber yet","UNSUPPORTED_OPERATION",{operation:"pause(false)"}),h(this,Je,!!t)}resume(){h(this,Je,null)}_handleMessage(t){if(l(this,ge)!=null&&l(this,Je)===null){let e=l(this,pe);e==null?e=this._emit(l(this,Kt),t):e=e.then(async()=>{await this._emit(l(this,Kt),t)}),h(this,pe,e.then(()=>{l(this,pe)===e&&h(this,pe,null)}))}}async _emit(t,e){throw new Error("sub-classes must implemente this; _emit")}}Kt=new WeakMap,Gs=new WeakMap,ge=new WeakMap,Je=new WeakMap,pe=new WeakMap;class mh extends Fi{constructor(t){super(t,["newHeads"])}async _emit(t,e){t.emit("block",parseInt(e.number))}}class wh extends Fi{constructor(t){super(t,["newPendingTransactions"])}async _emit(t,e){t.emit("pending",e)}}var Qs;class yh extends Fi{constructor(e,n){super(e,["logs",n]);p(this,Qs,void 0);h(this,Qs,JSON.stringify(n))}get logFilter(){return JSON.parse(l(this,Qs))}async _emit(e,n){e.emit(this.logFilter,e._wrapLog(n,e._network))}}Qs=new WeakMap;var Ve,Jn,Ae;class bh extends nc{constructor(e){super(e,{batchMaxCount:1});p(this,Ve,void 0);p(this,Jn,void 0);p(this,Ae,void 0);h(this,Ve,new Map),h(this,Jn,new Map),h(this,Ae,new Map)}_getSubscriber(e){switch(e.type){case"close":return new Cr("close");case"block":return new mh(this);case"pending":return new wh(this);case"event":return new yh(this,e.filter);case"orphan":if(e.filter.orphan==="drop-log")return new Cr("drop-log")}return super._getSubscriber(e)}_register(e,n){l(this,Jn).set(e,n);const r=l(this,Ae).get(e);if(r){for(const i of r)n._handleMessage(i);l(this,Ae).delete(e)}}async _send(e){m(!Array.isArray(e),"WebSocket does not support batch send","payload",e);const n=new Promise((r,i)=>{l(this,Ve).set(e.id,{payload:e,resolve:r,reject:i})});return await this._waitUntilReady(),await this._write(JSON.stringify(e)),[await n]}async _processMessage(e){const n=JSON.parse(e);if(n&&typeof n=="object"&&"id"in n){const r=l(this,Ve).get(n.id);if(r==null){this.emit("error",J("received result for unknown id","UNKNOWN_ERROR",{reasonCode:"UNKNOWN_ID",result:n}));return}l(this,Ve).delete(n.id),r.resolve(n)}else if(n&&n.method==="eth_subscription"){const r=n.params.subscription,i=l(this,Jn).get(r);if(i)i._handleMessage(n.params.result);else{let a=l(this,Ae).get(r);a==null&&(a=[],l(this,Ae).set(r,a)),a.push(n.params.result)}}else{this.emit("error",J("received unexpected message","UNKNOWN_ERROR",{reasonCode:"UNEXPECTED_MESSAGE",result:n}));return}}async _write(e){throw new Error("sub-classes must override this")}}Ve=new WeakMap,Jn=new WeakMap,Ae=new WeakMap;var ze,St;class Eh extends bh{constructor(e,n){super(n);p(this,ze,void 0);p(this,St,void 0);typeof e=="string"?(h(this,ze,()=>new Ah(e)),h(this,St,l(this,ze).call(this))):typeof e=="function"?(h(this,ze,e),h(this,St,e())):(h(this,ze,null),h(this,St,e)),this.websocket.onopen=async()=>{try{await this._start(),this.resume()}catch(r){console.log("failed to start WebsocketProvider",r)}},this.websocket.onmessage=r=>{this._processMessage(r.data)}}get websocket(){if(l(this,St)==null)throw new Error("websocket closed");return l(this,St)}async _write(e){this.websocket.send(e)}async destroy(){l(this,St)!=null&&(l(this,St).close(),h(this,St,null)),super.destroy()}}ze=new WeakMap,St=new WeakMap;class Ph extends Qa{constructor(){super(ja.secondNames.chainStatus);const t=this.getSchemaDefinition();this.version(Ja.ChainStatus).stores(t),this.on("populate",async e=>{await this.addInitialData(e)})}getSchemaDefinition(){const t={};return t[hs.ChainStatus]="chainName",t}async addInitialData(t){const e=[];for(const n of Si)e.push(sc(n.name));await t.table(hs.ChainStatus).bulkAdd(e)}}const Sr=new Ph,sc=s=>({chainName:s,latestBlockNumber:0,nodeStatus:void 0});function Ch(){const s=xh(),{subscribe:t,set:e,update:n}=Va(s);return{subscribe:t,set:e,update:n,updateState:(i,a)=>{Object.assign(s[i],a),e(s)}}}const Sh=Ch();function xh(){const s={};for(const t of Si)s[t.name]=sc(t.name);return s}const xr=hs.ChainStatus;async function Zh(s){return await Sr.transaction("r",xr,async()=>await Sr.table(xr).get(s))}async function Ei(s,t,e){await Sr.transaction("rw",xr,async()=>{await Sr.table(xr).update(s,{[t]:e})}).then(()=>{Sh.updateState(s,{[t]:e})})}function rc(s){return s.filter(e=>e.events.abiFragments.length>0)}async function Yh(s,t){const e=["http:","https:"],n=["ws:","wss:"],r=mc(t);let i,a="CONNECTING";if(await Ei(s.name,"nodeStatus",a),r===void 0)a="INVALID_URL";else if([...e,...n].includes(r.protocol)){const o=Rt.from(s.chainId);if(e.includes(r.protocol)){const c={batchMaxSize:1};i=new dh(t,void 0,c)}else i=new Eh(t,o);try{const c=await i.getNetwork();c.chainId===o.chainId?(a="SUCCESS",Gr.success("nodeProvider.getNetwork().",{network:c,options:{batchMaxCount:i._getOption("batchMaxCount"),batchMaxSize:i._getOption("batchMaxSize"),batchStallTime:i._getOption("batchStallTime"),cacheTimeout:i._getOption("cacheTimeout"),polling:i._getOption("polling"),pollingInterval:i._getOption("pollingInterval"),staticNetwork:i._getOption("staticNetwork")}})):a="WRONG_CHAIN"}catch(c){Gr.error("nodeProvider.getNetwork().",c),a="NETWORK_ERROR"}}else Gr.error("protocol should be [http / https / ws / wss]. RPC:",t),a="INVALID_PROTOCOL";return await Ei(s.name,"nodeStatus",a),a==="SUCCESS"?i:void 0}async function _h(s,t){const e=await s.getBlockNumber();return await Ei(t,"latestBlockNumber",e),e}async function Xh(s,t,e,n){let r=[];for(const i of s){const a=await vh(t,i,e,n);r=r.concat(a)}return r}async function vh(s,t,e,n){return await s.queryFilter(t,e,n)}class qh extends Qa{constructor(e){const n=wc(e),r=rc(n.contracts),i=Object.values(e);i.unshift(ja.secondNames.eventLog);super(i);w(this,"versionIdentifier");const a=this.getSchemaDefinition(r);this.version(Ja.EventLog).stores(a),this.on("populate",async o=>{await this.addInitialData(o,r)}),this.versionIdentifier=e}getSchemaDefinition(e){const n={},r=yc(e);for(const i of r)n[i]=bc;return n[hs.EventLog.syncStatus]="name",n}async addInitialData(e,n){const r=[];for(const i of n){const a=Nh(i);r.push(a)}await e.table(hs.EventLog.syncStatus).bulkAdd(r)}}function Nh(s){const t=s.creation.blockNumber;return{name:s.name,isSyncTarget:!0,isSyncing:!1,isAbort:!1,fetchedBlockNumber:t,creationBlockNumber:t,numOfSyncTargetContract:1,syncStateText:za,subSyncStatuses:null,events:ic(s.events.names)}}function ic(s){const t={};for(let e of s)t[e]={recordCount:0};return t}function Bh(){const s=Ih(),{subscribe:t,set:e,update:n}=Va(s);return{subscribe:t,set:e,update:n,updateState:(i,a)=>{Object.assign(Pi(s,i),a),Dh(s,i,a),Lh(s,i,a),e(s)}}}const $h=Bh();function Ih(){const s={};for(const t of Si){const e=lr(t.name,{});s[t.name]=e;for(const n of t.projects){const r=lr(n.name,{});s[t.name].subSyncStatuses[n.name]=r;for(const i of n.versions){const a=lr(i.name,{});s[t.name].subSyncStatuses[n.name].subSyncStatuses[i.name]=a;for(const o of rc(i.contracts)){const c=Oh(o);s[t.name].subSyncStatuses[n.name].subSyncStatuses[i.name].subSyncStatuses[o.name]=c}}}}return s}function lr(s,t){return{name:s,isSyncTarget:!0,isSyncing:!0,isAbort:!0,fetchedBlockNumber:0,creationBlockNumber:0,numOfSyncTargetContract:0,syncStateText:ls(!0,!0),subSyncStatuses:t}}function ls(s,t){return s?t?"stopping":"syncing":t?za:"stopped"}function Oh(s){return{...lr(s.name,null),events:ic(s.events.names)}}function kh(s,t){return s[t.chainName]}function Th(s,t){return s[t.chainName].subSyncStatuses[t.projectName]}function Rh(s,t){return s[t.chainName].subSyncStatuses[t.projectName].subSyncStatuses[t.versionName]}function Pi(s,t){return s[t.chainName].subSyncStatuses[t.projectName].subSyncStatuses[t.versionName].subSyncStatuses[t.contractName]}function Dh(s,t,e){if("isSyncing"in e||"isAbort"in e){const n=Pi(s,t),r=ls(n.isSyncing,n.isAbort);Object.assign(Pi(s,t),{syncStateText:r})}}function Lh(s,t,e){const n=kh(s,{chainName:t.chainName}),r=Th(s,{chainName:t.chainName,projectName:t.projectName}),i=Rh(s,{chainName:t.chainName,projectName:t.projectName,versionName:t.versionName});Uh(n,r,i,e),Fh(n,r,i,e),Mh(n,r,i,e)}function Uh(s,t,e,n){for(const r of lc)r in n&&(e[r]=qr(e.subSyncStatuses,r),t[r]=qr(t.subSyncStatuses,r),s[r]=qr(s.subSyncStatuses,r))}function qr(s,t){Ga(s);for(const e of Object.values(s))if(e[t])return!0;return!1}function Fh(s,t,e,n){for(const r of uc)(r in n||"isSyncTarget"in n)&&(e[r]=$r(e.subSyncStatuses,r),t[r]=$r(t.subSyncStatuses,r),s[r]=$r(s.subSyncStatuses,r))}function $r(s,t){let e=0;Ga(s);for(const n of Object.values(s))n.isSyncTarget&&(e+=n[t]);return e}function Mh(s,t,e,n){("isSyncing"in n||"isAbort"in n)&&(e.syncStateText=ls(e.isSyncing,e.isAbort),t.syncStateText=ls(t.isSyncing,t.isAbort),s.syncStateText=ls(s.isSyncing,s.isAbort))}export{cs as C,qh as D,$h as a,Yh as b,Xh as c,_h as d,rc as e,Zh as g,Sh as s,Ei as u};
