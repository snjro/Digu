import{T as f}from"./_index.26ae7803.js";import{i as D,s as l,a as w}from"./storeUserSettings.8972ff17.js";import{d as R,D as I,b as c,a as h}from"./dbBase.2eec5af3.js";import{s as y}from"./storeRpcSettings.17a6a518.js";class U extends R{constructor(t){let a=h.secondNames.settings;t&&(a+=t),super(a);const r=this.getSchemaDefinition();this.version(I.Settings).stores(r),this.on("populate",async S=>{await this.addInitialData(S)})}getSchemaDefinition(){return{[c.Settings.rpcSettings]:"chainName",[c.Settings.userSettings]:"userSettingsId"}}async addInitialData(t){await Promise.all([A(t),N(t)])}}async function A(n){const t=[];for(const a of f)await o.getDbRecordRpcSettings(a.name)===void 0&&t.push(D(a));t.length>0&&await n.table(c.Settings.rpcSettings).bulkAdd(t)}async function N(n){const t=[];await o.getDbRecordUserSettings("userSetting01")===void 0&&t.push(w()),t.length>0&&await n.table(c.Settings.userSettings).bulkAdd(t)}const i=new U;var o;(n=>{const t=c.Settings.rpcSettings,a=c.Settings.userSettings;async function r(e){return await i.transaction("r",t,async()=>await i.table(t).get(e))}n.getDbRecordRpcSettings=r;async function S(e,s){return(await r(e))[s]}n.getDbItemRpcSettings=S;async function u(e,s,g){await i.transaction("rw",t,async()=>{await i.table(t).update(e,{[s]:g})}).then(()=>{y.updateState(e,{[s]:g})})}n.updateDbItemRpcSettings=u;async function d(e){return await i.transaction("r",a,async()=>await i.table(a).get(e))}n.getDbRecordUserSettings=d;async function p(e,s){return(await d(e))[s]}n.getDbItemUserSettings=p;async function m(e,s){await i.transaction("rw",a,async()=>{await i.table(a).update("userSetting01",{[e]:s})}).then(()=>{l.updateState({[e]:s})})}n.updateDbItemUserSettings=m;async function b(){await i.transaction("rw",i.table(t),i.table(a),async e=>{await i.addInitialData(e)})}n.addInitialData=b})(o||(o={}));export{o as D};
