import{a as L}from"../chunks/_page.a7d24bf2.js";import{s as D,e as w,i as I,d as H,w as T,p as E,F as $}from"../chunks/scheduler.d16bdadc.js";import{S as k,i as A,g as O,t as f,c as R,a as p,b as g,d,m as b,e as _,f as j}from"../chunks/index.4f66e2f2.js";import{B,p as V}from"../chunks/stores.c7401bf1.js";import{a as W,p as M,m as q}from"../chunks/CommonItemMember.d32f367b.js";import{B as x}from"../chunks/BaseGrid.9fecaa05.js";import{c as K,n as U}from"../chunks/_index.26ae7803.js";import"../chunks/dbBase.2eec5af3.js";import{a as G}from"../chunks/storeSyncStatus.3b665716.js";import"../chunks/storeRpcSettings.17a6a518.js";import"../chunks/dbSettings.f1fd8dba.js";/* empty css                    */import{d as J,b as P,s as z}from"../chunks/BaseButton.411e578b.js";import{a as v,c as Q}from"../chunks/AbiParamsTable.6dc83b89.js";import{c as X}from"../chunks/columnDefAbiParams.969526ad.js";function Y({params:a}){return Z({params:a})}function Z({params:a}){const e=L({params:a}),t=e.targetContract.events.abiFragments;return{...e,targetEventAbiFragments:t}}const $e=Object.freeze(Object.defineProperty({__proto__:null,load:Y},Symbol.toStringTag,{value:"Module"})),h=z.grid,ee=J(""),S=!0,N=!1,te=a=>({headerName:"Basic",openByDefault:!1,children:[{headerName:"Event Name",sortable:S,editable:N,cellClass:ee,columnGroupShow:void 0,valueGetter:t=>t.data?t.data.eventName:"",cellRenderer:v((t,n)=>{n.data&&new P({target:t.eGui,props:{text:n.data.eventName,href:`${a}${n.data.eventName}#${K(W[0])}`,textSize:h,openNewTab:!1,prefixIcon:{name:"databaseOutline",size:h}}})})},{field:"eventAnonymous",headerName:"Anonymous",sortable:S,editable:N,cellClass:"flex justify-center",columnGroupShow:"open",cellDataType:!1},{headerName:"Topic Hash",sortable:S,editable:N,cellClass:"flex justify-center",columnGroupShow:"open",valueGetter:t=>t.data?t.data.eventTopicHash:"",cellRenderer:v((t,n)=>{n.data&&new B({target:t.eGui,props:{text:n.data.eventTopicHash,textSize:h,fontMono:!0,showCopyButton:!0}})})}]}),ne=a=>X("eventInputs","inputs",a,!0);function ae(a){let e,t;return e=new B({props:{text:a[1],textSize:a[3]}}),{c(){g(e.$$.fragment)},l(n){d(e.$$.fragment,n)},m(n,s){b(e,n,s),t=!0},p(n,s){const u={};s&2&&(u.text=n[1]),e.$set(u)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){f(e.$$.fragment,n),t=!1},d(n){_(e,n)}}}function re(a){let e,t;return e=new P({props:{text:a[1],href:a[2],textSize:a[3],openNewTab:!1}}),{c(){g(e.$$.fragment)},l(n){d(e.$$.fragment,n)},m(n,s){b(e,n,s),t=!0},p(n,s){const u={};s&2&&(u.text=n[1]),e.$set(u)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){f(e.$$.fragment,n),t=!1},d(n){_(e,n)}}}function oe(a){let e,t,n,s;const u=[re,ae],r=[];function i(o,c){return o[0]>0?0:1}return e=i(a),t=r[e]=u[e](a),{c(){t.c(),n=w()},l(o){t.l(o),n=w()},m(o,c){r[e].m(o,c),I(o,n,c),s=!0},p(o,[c]){let m=e;e=i(o),e===m?r[e].p(o,c):(O(),f(r[m],1,1,()=>{r[m]=null}),R(),t=r[e],t?t.p(o,c):(t=r[e]=u[e](o),t.c()),p(t,1),t.m(n.parentNode,n))},i(o){s||(p(t),s=!0)},o(o){f(t),s=!1},d(o){o&&H(n),r[e].d(o)}}}function se(a,e,t){let n;T(a,G,l=>t(7,n=l));let{contractIdentifier:s}=e,{targetEventName:u}=e,{urlPathName:r}=e,i=0;const o=`${r}${u}${M("Event Logs (text)")}`;let c;const m=z.grid;return a.$$set=l=>{"contractIdentifier"in l&&t(4,s=l.contractIdentifier),"targetEventName"in l&&t(5,u=l.targetEventName),"urlPathName"in l&&t(6,r=l.urlPathName)},a.$$.update=()=>{a.$$.dirty&176&&t(0,i=n[s.chainName].subSyncStatuses[s.projectName].subSyncStatuses[s.versionName].subSyncStatuses[s.contractName].events[u].recordCount),a.$$.dirty&1&&t(1,c=U(i))},[i,c,o,m,s,u,r,n]}class ue extends k{constructor(e){super(),A(this,e,se,oe,D,{contractIdentifier:4,targetEventName:5,urlPathName:6})}}const ie=(a,e)=>({headerName:"Num of Logs",sortable:!0,editable:!1,cellStyle:Q("end"),columnGroupShow:void 0,valueGetter:t=>{var n;return le(a,(n=t.data)==null?void 0:n.eventName)},cellRenderer:v((t,n)=>{new ue({target:t.eGui,props:{contractIdentifier:a,targetEventName:n.data.eventName,urlPathName:e}})})}),le=(a,e)=>{let t=0;return e&&G.subscribe(n=>{t=n[a.chainName].subSyncStatuses[a.projectName].subSyncStatuses[a.versionName].subSyncStatuses[a.contractName].events[e].recordCount}),t},C=(a,e,t)=>[te(a),ie(t,a),ne(e)],ce=a=>{let e=[];for(const t of a){const n={eventName:t.name,eventAnonymous:t.anonymous,eventTopicHash:t.topicHash,eventInputs:t.inputs};e.push(n)}return e};function me(a){let e,t,n;function s(r){a[6](r)}let u={rows:a[2],paramColumnDefs:C(a[4].url.pathname,a[5](),{chainName:a[0].targetChain.name,projectName:a[0].targetProject.name,versionName:a[0].targetVersion.name,contractName:a[1]}),hasMultipulTabs:!1,exportFilePrefix:"events"};return a[3]!==void 0&&(u.isFullScreen=a[3]),e=new x({props:u}),E.push(()=>j(e,"isFullScreen",s)),{c(){g(e.$$.fragment)},l(r){d(e.$$.fragment,r)},m(r,i){b(e,r,i),n=!0},p(r,i){const o={};i&4&&(o.rows=r[2]),i&19&&(o.paramColumnDefs=C(r[4].url.pathname,r[5](),{chainName:r[0].targetChain.name,projectName:r[0].targetProject.name,versionName:r[0].targetVersion.name,contractName:r[1]})),!t&&i&8&&(t=!0,o.isFullScreen=r[3],$(()=>t=!1)),e.$set(o)},i(r){n||(p(e.$$.fragment,r),n=!0)},o(r){f(e.$$.fragment,r),n=!1},d(r){_(e,r)}}}function fe(a){let e,t,n;function s(r){a[7](r)}let u={titleProps:{titleText:a[1],titleCategoryLabelText:F},$$slots:{PageWrapperContent:[me]},$$scope:{ctx:a}};return a[3]!==void 0&&(u.isFullScreen=a[3]),e=new q({props:u}),E.push(()=>j(e,"isFullScreen",s)),{c(){g(e.$$.fragment)},l(r){d(e.$$.fragment,r)},m(r,i){b(e,r,i),n=!0},p(r,[i]){const o={};i&2&&(o.titleProps={titleText:r[1],titleCategoryLabelText:F}),i&287&&(o.$$scope={dirty:i,ctx:r}),!t&&i&8&&(t=!0,o.isFullScreen=r[3],$(()=>t=!1)),e.$set(o)},i(r){n||(p(e.$$.fragment,r),n=!0)},o(r){f(e.$$.fragment,r),n=!1},d(r){_(e,r)}}}const F="Events";function pe(a,e,t){let n;T(a,V,l=>t(4,n=l));let{data:s}=e,u,r=[];const i=()=>{let l=0;return r.forEach(y=>{y.eventInputs.length>l&&(l=y.eventInputs.length)}),l};let o=!1;function c(l){o=l,t(3,o)}function m(l){o=l,t(3,o)}return a.$$set=l=>{"data"in l&&t(0,s=l.data)},a.$$.update=()=>{a.$$.dirty&1&&t(1,u=s.targetContract.name),a.$$.dirty&1&&t(2,r=ce(s.targetEventAbiFragments))},[s,u,r,o,n,i,c,m]}class ke extends k{constructor(e){super(),A(this,e,pe,fe,D,{data:0})}}export{ke as component,$e as universal};
